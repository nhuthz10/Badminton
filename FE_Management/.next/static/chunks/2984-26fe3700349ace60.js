(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2984],{86021:function(n,e,t){"use strict";var r=t(57437),u=t(2265),i=t(16463),o=t(21159);e.default=function(n){var e=n.children,t=(0,i.useRouter)(),a=(0,o.v9)(function(n){return n.user.login});return(0,u.useEffect)(function(){a||t.push("/login")},[a]),(0,r.jsx)(r.Fragment,{children:e})}},12784:function(n,e,t){"use strict";t.d(e,{s:function(){return c}});var r=t(47002),u=t(57437),i=t(45040),o=t(2265),a=(0,o.createContext)(null),c=function(){return(0,o.useContext)(a)};e.Z=function(n){var e=n.children,t=(0,r._)((0,o.useState)(null),2),c=t[0],s=t[1];return(0,o.useEffect)(function(){var n=(0,i.io)("http://localhost:8080");return s(n),function(){n.disconnect()}},[]),(0,u.jsx)(a.Provider,{value:c,children:e})}},15149:function(n,e,t){"use strict";t.d(e,{v:function(){return i}});var r=t(38472),u=r.Z.create({baseURL:"http://localhost:8080"}),i=r.Z.create({baseURL:"http://localhost:8080"});i.interceptors.response.use(function(n){return n.data}),u.interceptors.response.use(function(n){return n.data}),e.Z=u},15943:function(n,e,t){"use strict";var r=t(7570),u=t(57437),i=t(94473),o=t.n(i),a=t(2265);e.Z=function(n){var e=n.children,t=n.loading,i=n.style;return(0,a.useEffect)(function(){t&&window.scrollTo({top:0,behavior:"smooth"})},[t]),(0,u.jsxs)("div",{className:"loading-container",style:(0,r._)({position:"relative"},i),children:[t&&(0,u.jsx)("div",{className:"loading-overlay",style:{position:"absolute",top:0,right:0,left:0,bottom:0,zIndex:"9999",background:"rgba(255, 255, 255, 0.4)"},children:(0,u.jsx)(o(),{color:"#FF8080",size:"100px",speedMultiplier:1.5,loading:!0,cssOverride:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"99999"}})}),e]})}},76818:function(n,e,t){"use strict";t.d(e,{Z:function(){return P}});var r=t(47002),u=t(57437),i=t(2265),o=t(87138),a=t(21159),c=t(45079),s=t(6920),l=t(16463),d=t(98920);t(69925);var h=t(7570),f=t(87029),v=t(32141);t(46715);var p=function(n){var e=n.attrs,t=n.handleLogOut,r=n.menu,i=n.roleId,o=(0,l.useRouter)(),c=(0,a.I0)(),s=function(n){c((0,v.A6)(1)),o.push(n)};return(0,u.jsx)("div",(0,f._)((0,h._)({className:"user-menu-container",tabIndex:"-1"},e),{children:r.map(function(n,e){var o=!1;return(e===r.length-1&&(o=!0),n.type&&"LOGOUT"===n.type)?(0,u.jsxs)("div",{children:[o&&(0,u.jsx)("hr",{style:{height:1,marginBottom:4}}),(0,u.jsxs)("div",{className:"userMenuItem",onClick:t,style:{marginBottom:10},children:[(0,u.jsx)(n.icon,{className:"icon"}),(0,u.jsx)("p",{className:"text",children:n.text})]})]},e):"R1"===i||"ADMIN"!==n.type&&"R2"===i?(0,u.jsxs)("div",{children:[o&&(0,u.jsx)("hr",{style:{height:1}}),(0,u.jsxs)("div",{onClick:function(){return s(n.to)},className:"userMenuItem",children:[(0,u.jsx)(n.icon,{className:"icon"}),(0,u.jsx)("p",{className:"text",children:n.text})]})]},e):void 0})}))},g=t(58438),m=t(75743),x=t(90770),b=t(65290),j=t(96266),y=t(93095),M=t(10365),I=t(83040);t(92763);var N=[{id:"default",value:"Tổng quan",icon:m.Z,path:"/",subMenu:null},{id:"product-parent",value:"Quản l\xfd sản phẩm",icon:x.Z,subMenu:[{id:"product",value:"Sản phẩm",path:"/product",subMenu:null},{id:"product-type",value:"Loại sản phẩm",path:"/product-type",subMenu:null},{id:"product-size",value:"K\xedch cỡ theo loại sản phẩm",path:"/product-size",subMenu:null},{id:"product-brand",value:"Thương hiệu",path:"/product-brand",subMenu:null}]},{id:"order-parent",value:"Quản l\xfd đơn h\xe0ng",icon:b.Z,subMenu:[{id:"order-waiting",value:"Đợi x\xe1c nhận",path:"/order/order-waiting",subMenu:null},{id:"order-delivery",value:"Đang giao",path:"/order/order-delivery",subMenu:null},{id:"order-done",value:"Ho\xe0n tất",path:"/order/order-done",subMenu:null},{id:"order-canceled",value:"Đ\xe3 hủy",path:"/order/order-canceled",subMenu:null}]},{id:"user",value:"Quản l\xfd người d\xf9ng",icon:j.Z,path:"/user",subMenu:null},{id:"voucher",value:"Quản l\xfd voucher",icon:y.Z,path:"/voucher",subMenu:null},{id:"revenue",value:"B\xe1o c\xe1o doanh thu",icon:M.Z,path:"/revenue",subMenu:null}],w=function(n){var e=n.isOpenDrawer,t=n.setIsOpenDrawer,o=(0,r._)((0,i.useState)(null),2),c=o[0],s=o[1],d=(0,l.usePathname)().split("/"),h=(0,r._)((0,i.useState)(d[1]||"default"),2),f=h[0],p=h[1],m=(0,r._)((0,i.useState)("down"),2),x=m[0],b=m[1],j=(0,i.useRef)({}),y=(0,l.useRouter)(),M=(0,a.I0)(),w=function(n){if(n===c)s(null);else{var e=j.current[c],t=j.current[n];if(e&&t){var r=e.getBoundingClientRect();t.getBoundingClientRect().top>r.top?b("down"):b("up")}s(n)}p(n)},Z=function(n,e){p(n),M((0,v.A6)(1)),t(!1),y.push(e)},C=function(n){return n.map(function(n){var e=n.subMenu&&n.subMenu.length>0,t=c===n.id,r=n.icon;return(0,u.jsxs)("div",{className:"menu-container",ref:function(e){return j.current[n.id]=e},children:[(0,u.jsx)("div",{className:r?"menu-item ".concat(n.id===f?"selected":""," "):"sub-menu-item ".concat(n.id===f?"selected":""),onClick:function(){e?w(n.id):Z(n.id,n.path)},children:(0,u.jsxs)("div",{className:"menu-item-content",children:[r?(0,u.jsx)(r,{className:"icon"}):null,(0,u.jsx)("h3",{className:"text",children:n.value}),e&&(0,u.jsx)(I.Z,{className:"arrow-icon ".concat(t?"down":"rotate")})]})}),e&&(0,u.jsx)("div",{className:"sub-menu-container ".concat(t?"open ".concat(x):""),children:C(n.subMenu)})]},n.id)})};return(0,u.jsx)(g.ZP,{open:e,onClose:function(){t(!1)},children:(0,u.jsxs)("div",{className:"drawer-nav-container",children:[(0,u.jsx)("div",{className:"drawer-nav-title",children:"BAMITO"}),C(N)]})})},Z=t(3631),C=t(55922),_=t(61943),A=t(11735),R=t(70766),S=t(64535),k=t(26393);t(3436);var O=t(12784),D=t(33814);t(62899);var L=function(){var n,e,t=(0,r._)((0,i.useState)(!1),2),o=t[0],c=t[1],s=(0,r._)((0,i.useState)("ALL"),2),v=s[0],p=s[1],g=(0,r._)((0,i.useState)([]),2),m=g[0],x=g[1],b=(0,a.v9)(function(n){var e;return null===(e=n.user.userInfo)||void 0===e?void 0:e.id}),j=(0,r._)((0,i.useState)(null),2),y=j[0],M=j[1],I=(0,r._)((0,i.useState)(new Date),2),N=I[0],w=I[1],Z=(0,O.s)(),L=(0,l.useRouter)(),E=(0,a.I0)();(0,i.useEffect)(function(){P()},[v]),(0,i.useEffect)(function(){M(m.filter(function(n){return 0===n.status}).length)},[m]),(0,i.useEffect)(function(){if(Z)return Z.on("notify-order-succeed",function(){P()}),Z.on("notify-cancel-order-succeed",function(){P()}),function(){Z.off("notify-order-succeed"),Z.off("notify-cancel-order-succeed")}},[Z]);var P=(n=(0,_._)(function(){var n,e,t,r,u,i;return(0,A.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),c(!0),[4,(0,R.Sm)(b,v)];case 1:return(n=o.sent())&&0===n.errCode&&x(null==n?void 0:n.data),[3,4];case 2:return(null==(e=o.sent())?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.errCode)===-4?(D.Am.error("Phi\xean bản đăng nhập hết hạn"),E((0,C.ni)())):D.Am.error(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(u=i.data)||void 0===u?void 0:u.message),[3,4];case 3:return c(!1),[7];case 4:return[2]}})}),function(){return n.apply(this,arguments)});(0,i.useEffect)(function(){var n=setInterval(function(){w(new Date)},3e4);return function(){return clearInterval(n)}},[]);var T=function(n){var e=N-new Date(n),t=Math.floor(e/1e3),r=Math.floor(e/6e4),u=Math.floor(e/36e5),i=Math.floor(e/864e5),o=Math.floor(e/6048e5),a=Math.floor(e/2592e6);return t<60?"".concat(t," gi\xe2y"):r<60?"".concat(r," ph\xfat"):u<24?"".concat(u," giờ"):i<7?"".concat(i," ng\xe0y"):o<4?"".concat(o," tuần"):a<12?"".concat(a," th\xe1ng"):"".concat(Math.floor(e/31536e6)," năm")},z=function(n){p(n)},B=(e=(0,_._)(function(n,e,t){var r,u,i,o,a,c,s,l;return(0,A.Jh)(this,function(d){switch(d.label){case 0:if(0!==e)return[3,5];d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,(0,R.IM)({notificationId:n,userId:b})];case 2:return(r=d.sent())&&0===r.errCode&&P(),[3,5];case 3:return(null==(u=d.sent())?void 0:null===(o=u.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.errCode)===2?D.Am.error("Th\xf4ng b\xe1o kh\xf4ng tồn tại"):(null==u?void 0:null===(c=u.response)||void 0===c?void 0:null===(a=c.data)||void 0===a?void 0:a.errCode)===-4?(D.Am.error("Phi\xean bản đăng nhập hết hạn"),E((0,C.ni)())):D.Am.error(null==u?void 0:null===(l=u.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message),[3,5];case 4:return[7];case 5:return L.push(t),[2]}})}),function(n,t,r){return e.apply(this,arguments)});return(0,u.jsx)(d.ZP,{interactive:!0,placement:"bottom-end",delay:[0,300],render:function(n){return(0,u.jsxs)("div",(0,f._)((0,h._)({className:"notification-container",tabIndex:"-1"},n),{children:[(0,u.jsx)("p",{className:"notification-heading",children:"Th\xf4ng b\xe1o"}),o?(0,u.jsx)(k.Z,{height:65,width:"100%",count:7,style:{marginBottom:6,borderRadius:5}}):(0,u.jsxs)(i.Fragment,{children:[(0,u.jsxs)("div",{className:"notification-filter",children:[(0,u.jsx)("p",{className:"notification-filter-item ".concat("ALL"===v?"selected":null),onClick:function(){return z("ALL")},children:"Tất cả"}),(0,u.jsx)("p",{className:"notification-filter-item ".concat("NOREAD"===v?"selected":null),onClick:function(){return z("NOREAD")},children:"Chưa đọc"})]}),(0,u.jsx)("div",{className:"notification-list",children:m&&m.length>0?m.map(function(n,e){var t,r;return(0,u.jsxs)("div",{className:"notification-item",onClick:function(){var e;return B(n.id,n.status,null==n?void 0:null===(e=n.NotificationData)||void 0===e?void 0:e.path)},children:[null==n?void 0:null===(t=n.NotificationData)||void 0===t?void 0:t.message,(0,u.jsx)("p",{className:"notification-time ".concat(0===n.status?null:"readed"),children:T(null==n?void 0:null===(r=n.NotificationData)||void 0===r?void 0:r.createdAt)}),0===n.status?(0,u.jsx)("div",{className:"notification-see-icon"}):null]},e)}):(0,u.jsx)("h1",{style:{padding:"10px 0",textAlign:"center"},children:"Kh\xf4ng c\xf3 th\xf4ng b\xe1o"})})]})]}))},children:(0,u.jsxs)("div",{style:{position:"relative"},children:[(0,u.jsx)(S.Z,{style:{height:40,width:40,color:"var(--white-color)",cursor:"pointer"}}),(0,u.jsx)("span",{style:{position:"absolute",top:-2,right:-3,display:"flex",fontSize:"0.8rem",alignItems:"center",justifyContent:"center",fontWeight:600,height:17,width:17,borderRadius:"50%",backgroundColor:"var(--second-color)",color:"var(--white-color)"},children:y})]})})},E=t(66648),P=function(){var n=(0,a.v9)(function(n){return n.user.userInfo.avatar}),e=(0,a.v9)(function(n){var e,t;return null===(t=n.user.userInfo)||void 0===t?void 0:null===(e=t.roleData)||void 0===e?void 0:e.roleId}),t=(0,r._)((0,i.useState)(!1),2),h=t[0],f=t[1],v=(0,a.I0)(),g=(0,l.useRouter)(),m=function(){v((0,C.ni)()),g.push("/")};return(0,u.jsxs)("div",{className:"admin-header-container",children:[(0,u.jsx)(o.default,{href:"/",className:"header-wrap-logo",children:(0,u.jsx)(E.default,{src:"/images/logo.png",width:35,height:60,sizes:"100vw",alt:"bamito",className:"header-logo"})}),(0,u.jsx)(s.G,{onClick:function(){return f(!0)},icon:c.xiG,className:"header-bars-icon"}),(0,u.jsxs)("div",{className:"admin-info",children:[(0,u.jsx)(L,{}),(0,u.jsx)(d.ZP,{interactive:!0,placement:"bottom-end",delay:[0,300],render:function(n){return(0,u.jsx)(p,{attrs:n,handleLogOut:m,menu:Z.v,roleId:e})},children:(0,u.jsx)(E.default,{src:n||"/images/default-avatar.png",alt:"admin",height:50,width:50,className:"admin-avatar"})})]}),(0,u.jsx)(w,{isOpenDrawer:h,setIsOpenDrawer:f})]})}},32141:function(n,e,t){"use strict";t.d(e,{A6:function(){return u}});var r=(0,t(34036).oM)({name:"pagination",initialState:{page:1},reducers:{handleChangePage:function(n,e){n.page=e.payload}}}),u=r.actions.handleChangePage;e.ZP=r.reducer},55922:function(n,e,t){"use strict";t.d(e,{Ib:function(){return o},n1:function(){return a},ni:function(){return i}});var r=(0,t(34036).oM)({name:"user",initialState:{login:!1,userInfo:[],favourites:[],cartId:null},reducers:{logIn:function(n,e){n.login=!0,n.userInfo=e.payload},logOut:function(n){n.login=!1,n.userInfo=[],n.favourites=[],n.cartId=null},updateAvatar:function(n,e){n.userInfo.avatar=e.payload},updateFavourites:function(n,e){n.favourites=e.payload},updateCartId:function(n,e){n.cartId=e.payload}}}),u=r.actions,i=u.logOut,o=u.logIn,a=u.updateAvatar;u.updateFavourites,u.updateCartId,e.ZP=r.reducer},70766:function(n,e,t){"use strict";t.d(e,{Ak:function(){return p},C6:function(){return d},Cp:function(){return l},F$:function(){return c},IM:function(){return j},Ki:function(){return m},Md:function(){return s},Pc:function(){return x},Rm:function(){return f},Sm:function(){return b},a5:function(){return y},gY:function(){return h},iG:function(){return g},yX:function(){return v}});var r,u,i=t(61943),o=t(11735),a=t(15149),c=function(n,e){return a.Z.post("/api/user/login-admin",{email:n,password:e})},s=(r=(0,i._)(function(n){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,a.v.get("/api/user/get-user-infor?userId=".concat(n))];case 1:return[2,e.sent()]}})}),function(n){return r.apply(this,arguments)}),l=function(n){return a.v.post("/api/user/create-user",n)},d=function(n){return a.v.post("/api/user/send-otp-code",{email:n})},h=function(n){return a.v.put("/api/user/change-password",n)},f=function(n){return a.v.get("/api/user/get-user?id=".concat(n))},v=function(n){return a.v.put("/api/user/update-user",n)},p=function(n){return a.v.put("/api/user/change-password-profile",n)},g=function(n,e,t){return a.v.get("/api/user/get-all-user?limit=".concat(n,"&page=").concat(e,"&name=").concat(t))},m=function(n){return a.v.delete("/api/user/delete-user?id=".concat(n))},x=function(){return a.v.get("/api/user/get-all-role")},b=function(n,e){return a.v.get("/api/notification/get-all-notification-admin?userId=".concat(n,"&status=").concat(e))},j=function(n){return a.v.put("/api/notification/update-notification",n)},y=(u=(0,i._)(function(n){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,a.Z.post("/api/user/refresh-token",{},{headers:{Authorization:"Bearer ".concat(n)}})];case 1:return[2,e.sent()]}})}),function(n){return u.apply(this,arguments)})},3631:function(n,e,t){"use strict";t.d(e,{W:function(){return f},v:function(){return h}});var r=t(78123),u=t(11831),i=t(75743),o=t(90770),a=t(65290),c=t(96266),s=t(93095),l=t(10365),d=t(35635),h=[{to:"/profile",icon:r.Z,text:"Th\xf4ng tin t\xe0i khoản",type:"USER"},{to:"",icon:u.Z,text:"Đăng xuất",type:"LOGOUT"}],f=[{id:"default",value:"Tổng quan",icon:i.Z,path:"/",subMenu:null},{id:"product-parent",value:"Quản l\xfd sản phẩm",icon:o.Z,subMenu:[{id:"product",value:"Sản phẩm",path:"/product",subMenu:null},{id:"product-type",value:"Loại sản phẩm",path:"/product-type",subMenu:null},{id:"product-size",value:"K\xedch cỡ theo loại sản phẩm",path:"/product-size",subMenu:null},{id:"product-brand",value:"Thương hiệu",path:"/product-brand",subMenu:null}]},{id:"order-parent",value:"Quản l\xfd đơn h\xe0ng",icon:a.Z,subMenu:[{id:"order-waiting",value:"Đợi x\xe1c nhận",path:"/order/order-waiting",subMenu:null},{id:"order-delivery",value:"Đang giao",path:"/order/order-delivery",subMenu:null},{id:"order-done",value:"Ho\xe0n tất",path:"/order/order-done",subMenu:null},{id:"order-canceled",value:"Đ\xe3 hủy",path:"/order/order-canceled",subMenu:null}]},{id:"user",value:"Quản l\xfd người d\xf9ng",icon:c.Z,path:"/user",subMenu:null},{id:"blog",value:"Quản l\xfd b\xe0i viết",icon:d.Z,path:"/blog",subMenu:null},{id:"voucher",value:"Quản l\xfd voucher",icon:s.Z,path:"/voucher",subMenu:null},{id:"revenue",value:"B\xe1o c\xe1o doanh thu",icon:l.Z,path:"/revenue",subMenu:null}]},92763:function(){},62899:function(){},46715:function(){},69925:function(){}}]);