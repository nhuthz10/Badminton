(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9006],{43658:function(e,n,t){Promise.resolve().then(t.bind(t,45946))},45946:function(e,n,t){"use strict";t.r(n);var r=t(61943),a=t(7570),d=t(87029),i=t(47002),o=t(11735),s=t(57437),l=t(2265),u=t(76548),p=t(39234),c=t(39343),m=t(75870),h=t(37552),f=t(92129),v=t.n(f),x=t(44819);t(38419);var N=t(48024),g=t(63931),I=t(33814);t(44193);var D=t(16463),_=t(32416),S=t(21159),j=t(41131),T=t(29982),b=t(91606),y=t(66648),C=t(55922),E=new(v()),A=(0,N.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});n.default=function(){var e,n,t,f=(0,c.cI)(),v=f.handleSubmit,N=f.control,R=f.setValue,P=f.formState.errors,O=(0,D.useRouter)(),z=(0,D.usePathname)().split("/"),M=(0,S.v9)(function(e){var n,t;return null===(t=e.admin)||void 0===t?void 0:null===(n=t.allProductType)||void 0===n?void 0:n.data}),Z=(0,S.v9)(function(e){var n,t;return null===(t=e.admin)||void 0===t?void 0:null===(n=t.allBrand)||void 0===n?void 0:n.data}),w=(0,i._)((0,l.useState)("/images/ImgNoProduct.png"),2),U=w[0],V=w[1],L=(0,i._)((0,l.useState)(""),2),k=L[0],q=L[1],G=(0,i._)((0,l.useState)(!1),2),F=G[0],H=G[1],$=(0,i._)((0,l.useState)(""),2),Q=$[0],W=$[1],B=(0,i._)((0,l.useState)(""),2),J=B[0],Y=B[1],K=(0,S.I0)(),X=(e=(0,r._)(function(e){var n,t;return(0,o.Jh)(this,function(r){return(n=e.target.files[0])?(t=URL.createObjectURL(n),q(n),V(t),H(!1)):(q(""),V("/images/ImgNoProduct.png"),H(!0)),[2]})}),function(n){return e.apply(this,arguments)}),ee=(n=(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,K((0,_.DD)({pagination:!1}))];case 1:return e.sent(),[4,K((0,_.RO)({pagination:!1}))];case 2:return e.sent(),[2]}})}),function(){return n.apply(this,arguments)});(0,l.useEffect)(function(){ee()},[]);var en=(t=(0,r._)(function(e){var n,t,r,a,d,i,s,l,u,p,c,m,h,f,v,x,N,g,D,S,T,b,y,E;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if("create"!==z[2])return[3,6];if(!(!U||!k))return[3,1];return H(!0),[3,5];case 1:return o.trys.push([1,3,4,5]),K((0,_.qu)(!0)),(n=new FormData).append("image",k),n.append("productId",e.productID),n.append("brandId",e.brandID),n.append("productTypeId",e.productType),n.append("name",e.productName),n.append("price",e.price.replace(/\./g,"")),n.append("descriptionContent",Q),n.append("descriptionHTML",J),[4,(0,j.$e)(n)];case 2:return(t=o.sent())&&0===t.errCode&&(I.Am.success("Th\xeam sản phẩm th\xe0nh c\xf4ng"),R("productID",""),R("brandID",""),R("productType",""),R("productName",""),R("price",""),W(""),Y(""),V("/images/ImgNoProduct.png"),q(""),O.push("/product")),[3,5];case 3:return(null==(r=o.sent())?void 0:null===(d=r.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:a.errCode)===2?I.Am.error("M\xe3 sản phẩm đ\xe3 tồn tại"):(null==r?void 0:null===(s=r.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.errCode)===3?I.Am.error("T\xean sản phẩm đ\xe3 tồn tại"):(null==r?void 0:null===(u=r.response)||void 0===u?void 0:null===(l=u.data)||void 0===l?void 0:l.errCode)===-4?(I.Am.error("Phi\xean bản đăng nhập hết hạn"),K((0,C.ni)())):I.Am.error(null==r?void 0:null===(c=r.response)||void 0===c?void 0:null===(p=c.data)||void 0===p?void 0:p.message),[3,5];case 4:return K((0,_.qu)(!1)),[7];case 5:return[3,11];case 6:if("edit"!==z[2])return[3,11];o.label=7;case 7:return o.trys.push([7,9,10,11]),K((0,_.qu)(!0)),(m=new FormData).append("id",data.id),m.append("image",k),m.append("productId",e.productID),m.append("brandId",e.brandID),m.append("productTypeId",e.productType),m.append("name",e.productName),m.append("price",e.price.replace(/\./g,"")),m.append("discount",e.discount),m.append("descriptionContent",Q),m.append("descriptionHTML",J),[4,(0,j.Hk)(m)];case 8:return(h=o.sent())&&0===h.errCode&&(I.Am.success("Cập nhật sản phẩm th\xe0nh th\xe0nh c\xf4ng"),R("productID",""),R("brandID",""),R("productType",""),R("productName",""),R("description",""),R("discount",""),R("price",""),W(""),Y(""),V("/images/ImgNoProduct.png"),q(""),O.push("/product")),[3,11];case 9:return(null==(f=o.sent())?void 0:null===(x=f.response)||void 0===x?void 0:null===(v=x.data)||void 0===v?void 0:v.errCode)===2?I.Am.error("M\xe3 sản phẩm đ\xe3 tồn tại"):(null==f?void 0:null===(g=f.response)||void 0===g?void 0:null===(N=g.data)||void 0===N?void 0:N.errCode)===3?I.Am.error("T\xean sản phẩm đ\xe3 tồn tại"):(null==f?void 0:null===(S=f.response)||void 0===S?void 0:null===(D=S.data)||void 0===D?void 0:D.errCode)===4?I.Am.error("Sản phẩm kh\xf4ng tồn tại"):(null==f?void 0:null===(b=f.response)||void 0===b?void 0:null===(T=b.data)||void 0===T?void 0:T.errCode)===-4?(I.Am.error("Phi\xean bản đăng nhập hết hạn"),K((0,C.ni)())):I.Am.error(null==f?void 0:null===(E=f.response)||void 0===E?void 0:null===(y=E.data)||void 0===y?void 0:y.message),[3,11];case 10:return K((0,_.qu)(!1)),[7];case 11:return[2]}})}),function(e){return t.apply(this,arguments)}),et=function(e){e.target.value?R("productID",(0,b.ZP)(e.target.value),{shouldValidate:!0}):R("productID","",{shouldValidate:!1})},er=new Intl.NumberFormat("vi-VN",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}),ea=function(e){if(e.target.value){var n=e.target.value.replace(/[^\d]/g,"");R("price",er.format(n),{shouldValidate:!0})}};return(0,s.jsxs)("form",{onSubmit:v(en),className:"model-add-update",children:[(0,s.jsx)("h1",{className:"model-add-update-header",children:"create"===z[2]?"Th\xeam sản phẩm":"Sửa th\xf4ng tin sản phẩm"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:260},children:[(0,s.jsx)(y.default,{src:U,alt:"",height:230,width:180,style:{height:230,width:180,objectFit:"containt",borderRadius:10,border:"1px solid gray"}}),F&&(0,s.jsx)("p",{style:{color:"red",fontSize:"var(--small-fontSize)",marginTop:"1rem"},children:"Tải h\xecnh ảnh sản phẩm"})]}),(0,s.jsxs)(u.Z,{component:"label",variant:"contained",startIcon:(0,s.jsx)(g.Z,{}),sx:{height:"4rem"},children:["Tải ảnh l\xean",(0,s.jsx)(A,{type:"file",onChange:function(e){return X(e)}})]})]}),(0,s.jsxs)("div",{className:"modal-add-update-input-wrapper",children:[(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"M\xe3 sản phẩm"}),(0,s.jsx)(c.Qr,{control:N,name:"productID",rules:{required:"Nhập m\xe3 sản phẩm"},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!P.productID,InputProps:{style:{fontSize:"var(--text-fontSize)"}},variant:"filled",size:"small",hiddenLabel:!0,className:"modal-add-update-input-text-field"}))}}),P.productID&&(0,s.jsx)("p",{className:"error-message-flex",children:P.productID.message})]}),(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"Loại sản phẩm"}),(0,s.jsx)(c.Qr,{control:N,name:"productType",rules:{required:"Chọn loại sản phẩm"},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!P.productType,select:!0,variant:"filled",hiddenLabel:!0,InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field",SelectProps:{IconComponent:function(){return(0,s.jsx)(h.Z,{style:{fontSize:"3.5rem"}})}},children:M&&M.length>0&&M.map(function(e){return(0,s.jsx)(m.Z,{value:e.productTypeId,style:{fontSize:"var(--text-fontSize)"},children:e.productTypeName},e.productTypeId)})}))}}),P.productType&&(0,s.jsx)("p",{className:"error-message-flex",children:P.productType.message})]})]}),(0,s.jsxs)("div",{className:"modal-add-update-input-wrapper",children:[(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"Thương hiệu"}),(0,s.jsx)(c.Qr,{control:N,name:"brandID",rules:{required:"Chọn thương hiệu"},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!P.brandID,select:!0,variant:"filled",hiddenLabel:!0,className:"modal-add-update-input-text-field",InputProps:{style:{fontSize:"var(--text-fontSize)"}},SelectProps:{IconComponent:function(){return(0,s.jsx)(h.Z,{style:{fontSize:"3.5rem"}})}},children:Z&&Z.length>0&&Z.map(function(e){return(0,s.jsx)(m.Z,{value:e.brandId,style:{fontSize:"var(--text-fontSize)"},children:e.brandName},e.brandId)})}))}}),P.brandID&&(0,s.jsx)("p",{className:"error-message",children:P.brandID.message})]}),(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"Gi\xe1 (VND)"}),(0,s.jsx)(c.Qr,{control:N,name:"price",rules:{required:"Nhập gi\xe1 sản phẩm",pattern:{value:T.Sz.PRICE,message:"Gi\xe1 kh\xf4ng hợp lệ"}},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!P.price,variant:"filled",hiddenLabel:!0,onChange:function(e){n.onChange(e),ea(e)},InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field"}))}}),P.price&&(0,s.jsx)("p",{className:"error-message-flex",children:P.price.message})]})]}),(0,s.jsxs)("div",{className:"modal-add-update-input-wrapper",children:[(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"T\xean sản phẩm"}),(0,s.jsx)(c.Qr,{control:N,name:"productName",rules:{required:"Nhập t\xean sản phẩm"},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!P.productName,variant:"filled",hiddenLabel:!0,onChange:function(e){n.onChange(e),et(e)},InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field"}))}}),P.productName&&(0,s.jsx)("p",{className:"error-message",children:P.productName.message})]}),"edit"===z[2]&&(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"Giảm gi\xe1 (%)"}),(0,s.jsx)(c.Qr,{control:N,name:"discount",rules:{pattern:{value:T.Sz.DISCOUNT,message:"Giảm gi\xe1 kh\xf4ng hợp lệ"}},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!P.discount,variant:"filled",hiddenLabel:!0,InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field"}))}}),P.discount&&(0,s.jsx)("p",{className:"error-message",children:P.discount.message})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"M\xf4 tả"}),(0,s.jsx)(x.ZP,{style:{width:"100%",height:"500px",fontSize:"var(--text-fontSize)",marginTop:"15px"},renderHTML:function(e){return E.render(e)},value:Q,onChange:function(e){var n=e.html;W(e.text),Y(n)}})]}),(0,s.jsx)(u.Z,{type:"submit",variant:"contained",className:"btn",style:{margin:"30px 0"},children:"create"===z[2]?"Th\xeam":"Cập nhật"})]})}},91606:function(e,n,t){"use strict";t.d(n,{Nr:function(){return l},rS:function(){return u}});var r=t(47002),a=t(20920),d=t(4596),i=t.n(d),o=t(2265),s=t(94444),l=function(e,n){var t=(0,r._)((0,o.useState)(e),2),a=t[0],d=t[1];return(0,o.useEffect)(function(){var t=setTimeout(function(){return d(e)},n);return function(){return clearTimeout(t)}},[e,n]),a},u=(0,s.Z)({breakpoints:{values:{xs:0,sm:576,md:768,lg:992,xl:1200}}});n.ZP=function(e){e=i()(e.replace(/[^a-zA-Z0-9]/g,""));for(var n="",t=(0,a.Z)(),r=0;r<e.length;r++)r%2==0&&(n+=e[r]);return n.toUpperCase()+t.slice(0,5).toUpperCase()}},29982:function(e,n,t){"use strict";t.d(n,{VZ:function(){return a},ET:function(){return r},Sz:function(){return d}});var r={HOME:"/",PRODUCT:"/product/*",USER:"/user/*",LOGIN:"/login",REGISTER:"/register",NOT_FOUND:"/not-found",FORGOT_PASSWORD:"/forgot-password",CHANGE_PASSWORD:"/change-password/:userEmail",ADMIN:"/admin/*",OVERVIEW_ADMIN:"",PRODUCT_ADMIN:"product",PRODUCT_TYPE_ADMIN:"product-type",PRODUCT_BRAND_ADMIN:"product-brand",PRODUCT_SIZE_ADMIN:"product-size",PRODUCT_PRODUCTSIZE_ADMIN:"productsize",ORDER_DETAIL:"/:orderStatus/:orderId",ORDER_ADMIN:"order",ORDER_WAITING_ADMIN:"order-waiting",ORDER_DELIVERY_ADMIN:"order-delivery",ORDER_DONE_ADMIN:"order-done",ORDER_CANCELED_ADMIN:"order-canceled",USER_ADMIN:"user",VOUCHER_ADMIN:"voucher",REVENUE_ADMIN:"revenue",POST_ADMIN:"create",PUT_ADMIN:"edit"},a=10,d={USERNAME:/^[^\d!@#$%^&*()_+{}\[\]:;<>,.?/~\\-]+$/,EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,PHONE:/^\d{10,}$/,PRICE:/^\d{1,3}(?:\.\d{3})*$/,DISCOUNT:/^(?:100|[0-9]|[1-9][0-9])$/,QUANTITY:/^[0-9]+$/};t(91606)}},function(e){e.O(0,[9463,2171,9931,8436,1159,4444,8113,9343,769,2268,4470,6648,1611,2416,2971,7023,1744],function(){return e(e.s=43658)}),_N_E=e.O()}]);