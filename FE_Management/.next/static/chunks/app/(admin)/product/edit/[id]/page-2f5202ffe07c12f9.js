(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5612],{66608:function(e,n,t){Promise.resolve().then(t.bind(t,35459))},35459:function(e,n,t){"use strict";t.r(n);var r=t(61943),a=t(7570),d=t(87029),i=t(47002),o=t(11735),s=t(57437),l=t(2265),u=t(76548),p=t(39234),c=t(39343),m=t(75870),h=t(37552),f=t(92129),v=t.n(f),x=t(44819);t(38419);var N=t(48024),g=t(63931),I=t(33814);t(44193);var D=t(16463),_=t(32416),S=t(21159),j=t(41131),b=t(29982),T=t(91606),y=t(66648),C=t(55922),E=new(v()),R=(0,N.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});n.default=function(e){var n,t,f,v,N=e.params,A=(0,c.cI)(),P=A.handleSubmit,O=A.control,z=A.setValue,M=A.formState.errors,Z=(0,D.useRouter)(),w=(0,i._)((0,l.useState)({}),2),U=w[0],V=w[1],L=(0,S.v9)(function(e){var n,t;return null===(t=e.admin)||void 0===t?void 0:null===(n=t.allProductType)||void 0===n?void 0:n.data}),k=(0,S.v9)(function(e){var n,t;return null===(t=e.admin)||void 0===t?void 0:null===(n=t.allBrand)||void 0===n?void 0:n.data}),q=(0,i._)((0,l.useState)("/images/ImgNoProduct.png"),2),G=q[0],H=q[1],F=(0,i._)((0,l.useState)(""),2),Q=F[0],$=F[1],J=(0,i._)((0,l.useState)(!1),2),W=J[0],B=J[1],Y=(0,i._)((0,l.useState)(""),2),K=Y[0],X=Y[1],ee=(0,i._)((0,l.useState)(""),2),en=ee[0],et=ee[1],er=(0,S.I0)(),ea=(n=(0,r._)(function(e){var n,t;return(0,o.Jh)(this,function(r){return(n=e.target.files[0])?(t=URL.createObjectURL(n),$(n),H(t),B(!1)):($(""),H("/images/ImgNoProduct.png"),B(!0)),[2]})}),function(e){return n.apply(this,arguments)}),ed=(t=(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,er((0,_.DD)({pagination:!1}))];case 1:return e.sent(),[4,er((0,_.RO)({pagination:!1}))];case 2:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)}),ei=(f=(0,r._)(function(){var e,n,t,r,a,d,i,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),er((0,_.qu)(!1)),[4,(0,j.oV)(N.id)];case 1:return(e=o.sent())&&0===e.errCode&&V(e.data),[3,4];case 2:return(null==(n=o.sent())?void 0:null===(r=n.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.errCode)===-4?(I.Am.error("Phi\xean bản đăng nhập hết hạn"),er((0,C.ni)())):(null==n?void 0:null===(d=n.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:a.errCode)===2?I.Am.error("Thương hiệu kh\xf4ng tồn tại"):I.Am.error(null==n?void 0:null===(s=n.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message),[3,4];case 3:return er((0,_.qu)(!1)),[7];case 4:return[2]}})}),function(){return f.apply(this,arguments)});(0,l.useEffect)(function(){ei(),ed()},[]),(0,l.useEffect)(function(){if(U){var e,n;z("productID",U.productId),z("brandID",null===(e=U.brandData)||void 0===e?void 0:e.brandId),z("productType",null===(n=U.productTypeData)||void 0===n?void 0:n.productTypeId),z("productName",U.name),z("price",el.format(U.price)),z("discount",U.discount),H(U.image),"null"===U.descriptionContent?(X(""),et("")):(X(U.descriptionContent),et(U.descriptionHTML))}},[U,z]);var eo=(v=(0,r._)(function(e){var n,t,r,a,d,i,s,l,u,p,c,m,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),er((0,_.qu)(!0)),(n=new FormData).append("id",U.id),n.append("image",Q),n.append("productId",e.productID),n.append("brandId",e.brandID),n.append("productTypeId",e.productType),n.append("name",e.productName),n.append("price",e.price.replace(/\./g,"")),n.append("discount",e.discount),n.append("descriptionContent",K),n.append("descriptionHTML",en),[4,(0,j.Hk)(n)];case 1:return(t=o.sent())&&0===t.errCode&&(I.Am.success("Cập nhật sản phẩm th\xe0nh th\xe0nh c\xf4ng"),z("productID",""),z("brandID",""),z("productType",""),z("productName",""),z("description",""),z("discount",""),z("price",""),X(""),et(""),H("/images/ImgNoProduct.png"),$(""),Z.push("/product")),[3,4];case 2:return(null==(r=o.sent())?void 0:null===(d=r.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:a.errCode)===2?I.Am.error("M\xe3 sản phẩm đ\xe3 tồn tại"):(null==r?void 0:null===(s=r.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.errCode)===3?I.Am.error("T\xean sản phẩm đ\xe3 tồn tại"):(null==r?void 0:null===(u=r.response)||void 0===u?void 0:null===(l=u.data)||void 0===l?void 0:l.errCode)===4?I.Am.error("Sản phẩm kh\xf4ng tồn tại"):(null==r?void 0:null===(c=r.response)||void 0===c?void 0:null===(p=c.data)||void 0===p?void 0:p.errCode)===-4?(I.Am.error("Phi\xean bản đăng nhập hết hạn"),er((0,C.ni)())):I.Am.error(null==r?void 0:null===(h=r.response)||void 0===h?void 0:null===(m=h.data)||void 0===m?void 0:m.message),[3,4];case 3:return er((0,_.qu)(!1)),[7];case 4:return[2]}})}),function(e){return v.apply(this,arguments)}),es=function(e){e.target.value?z("productID",(0,T.ZP)(e.target.value),{shouldValidate:!0}):z("productID","",{shouldValidate:!1})},el=new Intl.NumberFormat("vi-VN",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}),eu=function(e){if(e.target.value){var n=e.target.value.replace(/[^\d]/g,"");z("price",el.format(n),{shouldValidate:!0})}};return(0,s.jsxs)("form",{onSubmit:P(eo),className:"model-add-update",children:[(0,s.jsx)("h1",{className:"model-add-update-header",children:"Sửa th\xf4ng tin sản phẩm"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:260},children:[(0,s.jsx)(y.default,{src:G,alt:"",height:230,width:180,style:{height:230,width:180,objectFit:"containt",borderRadius:10,border:"1px solid gray"}}),W&&(0,s.jsx)("p",{style:{color:"red",fontSize:"var(--small-fontSize)",marginTop:"1rem"},children:"Tải h\xecnh ảnh sản phẩm"})]}),(0,s.jsxs)(u.Z,{component:"label",variant:"contained",startIcon:(0,s.jsx)(g.Z,{}),sx:{height:"4rem"},children:["Tải ảnh l\xean",(0,s.jsx)(R,{type:"file",onChange:function(e){return ea(e)}})]})]}),(0,s.jsxs)("div",{className:"modal-add-update-input-wrapper",children:[(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"M\xe3 sản phẩm"}),(0,s.jsx)(c.Qr,{control:O,name:"productID",rules:{required:"Nhập m\xe3 sản phẩm"},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!M.productID,InputProps:{style:{fontSize:"var(--text-fontSize)"}},variant:"filled",size:"small",hiddenLabel:!0,className:"modal-add-update-input-text-field"}))}}),M.productID&&(0,s.jsx)("p",{className:"error-message-flex",children:M.productID.message})]}),(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"Loại sản phẩm"}),(0,s.jsx)(c.Qr,{control:O,name:"productType",rules:{required:"Chọn loại sản phẩm"},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!M.productType,select:!0,variant:"filled",hiddenLabel:!0,InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field",SelectProps:{IconComponent:function(){return(0,s.jsx)(h.Z,{style:{fontSize:"3.5rem"}})}},children:L&&L.length>0&&L.map(function(e){return(0,s.jsx)(m.Z,{value:e.productTypeId,style:{fontSize:"var(--text-fontSize)"},children:e.productTypeName},e.productTypeId)})}))}}),M.productType&&(0,s.jsx)("p",{className:"error-message-flex",children:M.productType.message})]})]}),(0,s.jsxs)("div",{className:"modal-add-update-input-wrapper",children:[(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"Thương hiệu"}),(0,s.jsx)(c.Qr,{control:O,name:"brandID",rules:{required:"Chọn thương hiệu"},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!M.brandID,select:!0,variant:"filled",hiddenLabel:!0,className:"modal-add-update-input-text-field",InputProps:{style:{fontSize:"var(--text-fontSize)"}},SelectProps:{IconComponent:function(){return(0,s.jsx)(h.Z,{style:{fontSize:"3.5rem"}})}},children:k&&k.length>0&&k.map(function(e){return(0,s.jsx)(m.Z,{value:e.brandId,style:{fontSize:"var(--text-fontSize)"},children:e.brandName},e.brandId)})}))}}),M.brandID&&(0,s.jsx)("p",{className:"error-message",children:M.brandID.message})]}),(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"Gi\xe1 (VND)"}),(0,s.jsx)(c.Qr,{control:O,name:"price",rules:{required:"Nhập gi\xe1 sản phẩm",pattern:{value:b.Sz.PRICE,message:"Gi\xe1 kh\xf4ng hợp lệ"}},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!M.price,variant:"filled",hiddenLabel:!0,onChange:function(e){n.onChange(e),eu(e)},InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field"}))}}),M.price&&(0,s.jsx)("p",{className:"error-message-flex",children:M.price.message})]})]}),(0,s.jsxs)("div",{className:"modal-add-update-input-wrapper",children:[(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"T\xean sản phẩm"}),(0,s.jsx)(c.Qr,{control:O,name:"productName",rules:{required:"Nhập t\xean sản phẩm"},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!M.productName,variant:"filled",hiddenLabel:!0,onChange:function(e){n.onChange(e),es(e)},InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field"}))}}),M.productName&&(0,s.jsx)("p",{className:"error-message",children:M.productName.message})]}),(0,s.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"Giảm gi\xe1 (%)"}),(0,s.jsx)(c.Qr,{control:O,name:"discount",rules:{pattern:{value:b.Sz.DISCOUNT,message:"Giảm gi\xe1 kh\xf4ng hợp lệ"}},defaultValue:"",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,d._)((0,a._)({},n),{error:!!M.discount,variant:"filled",hiddenLabel:!0,InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field"}))}}),M.discount&&(0,s.jsx)("p",{className:"error-message",children:M.discount.message})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"modal-add-update-input-label",children:"M\xf4 tả"}),(0,s.jsx)(x.ZP,{style:{width:"100%",height:"500px",fontSize:"var(--text-fontSize)",marginTop:"15px"},renderHTML:function(e){return E.render(e)},value:K,onChange:function(e){var n=e.html;X(e.text),et(n)}})]}),(0,s.jsx)(u.Z,{type:"submit",variant:"contained",className:"btn",style:{margin:"30px 0"},children:"Cập nhật"})]})}},91606:function(e,n,t){"use strict";t.d(n,{Nr:function(){return l},rS:function(){return u}});var r=t(47002),a=t(20920),d=t(4596),i=t.n(d),o=t(2265),s=t(94444),l=function(e,n){var t=(0,r._)((0,o.useState)(e),2),a=t[0],d=t[1];return(0,o.useEffect)(function(){var t=setTimeout(function(){return d(e)},n);return function(){return clearTimeout(t)}},[e,n]),a},u=(0,s.Z)({breakpoints:{values:{xs:0,sm:576,md:768,lg:992,xl:1200}}});n.ZP=function(e){e=i()(e.replace(/[^a-zA-Z0-9]/g,""));for(var n="",t=(0,a.Z)(),r=0;r<e.length;r++)r%2==0&&(n+=e[r]);return n.toUpperCase()+t.slice(0,5).toUpperCase()}},29982:function(e,n,t){"use strict";t.d(n,{VZ:function(){return a},ET:function(){return r},Sz:function(){return d}});var r={HOME:"/",PRODUCT:"/product/*",USER:"/user/*",LOGIN:"/login",REGISTER:"/register",NOT_FOUND:"/not-found",FORGOT_PASSWORD:"/forgot-password",CHANGE_PASSWORD:"/change-password/:userEmail",ADMIN:"/admin/*",OVERVIEW_ADMIN:"",PRODUCT_ADMIN:"product",PRODUCT_TYPE_ADMIN:"product-type",PRODUCT_BRAND_ADMIN:"product-brand",PRODUCT_SIZE_ADMIN:"product-size",PRODUCT_PRODUCTSIZE_ADMIN:"productsize",ORDER_DETAIL:"/:orderStatus/:orderId",ORDER_ADMIN:"order",ORDER_WAITING_ADMIN:"order-waiting",ORDER_DELIVERY_ADMIN:"order-delivery",ORDER_DONE_ADMIN:"order-done",ORDER_CANCELED_ADMIN:"order-canceled",USER_ADMIN:"user",VOUCHER_ADMIN:"voucher",REVENUE_ADMIN:"revenue",POST_ADMIN:"create",PUT_ADMIN:"edit"},a=10,d={USERNAME:/^[^\d!@#$%^&*()_+{}\[\]:;<>,.?/~\\-]+$/,EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,PHONE:/^\d{10,}$/,PRICE:/^\d{1,3}(?:\.\d{3})*$/,DISCOUNT:/^(?:100|[0-9]|[1-9][0-9])$/,QUANTITY:/^[0-9]+$/};t(91606)}},function(e){e.O(0,[9463,2171,9931,8436,1159,4444,8113,9343,769,2268,4470,6648,1611,2416,2971,7023,1744],function(){return e(e.s=66608)}),_N_E=e.O()}]);