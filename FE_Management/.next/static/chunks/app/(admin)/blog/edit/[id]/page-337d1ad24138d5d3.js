(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2563],{2934:function(e,t,n){Promise.resolve().then(n.bind(n,88870))},88870:function(e,t,n){"use strict";n.r(t);var i=n(61943),r=n(7570),a=n(87029),l=n(47002),s=n(11735),d=n(57437),o=n(2265),u=n(76548),c=n(39234),p=n(39343),h=n(75870),m=n(37552),v=n(63931),f=n(92129),g=n.n(f),x=n(44819);n(38419);var b=n(33814);n(44193);var j=n(16463),N=n(32416),S=n(21159),y=n(27169),P=n(55922),_=n(48024),z=n(66648),T=new(g()),w=(0,_.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});t.default=function(e){var t,n,f,g=e.params,_=(0,p.cI)(),C=_.handleSubmit,I=_.control,Z=_.setValue,D=_.formState.errors,L=(0,j.useRouter)(),A=(0,l._)((0,o.useState)({}),2),k=A[0],q=A[1],E=(0,l._)((0,o.useState)("/images/ImgNoProduct.png"),2),M=E[0],O=E[1],R=(0,l._)((0,o.useState)(""),2),F=R[0],H=R[1],J=(0,l._)((0,o.useState)(!1),2),Q=J[0],B=J[1],U=(0,l._)((0,o.useState)(""),2),V=U[0],G=U[1],K=(0,l._)((0,o.useState)(""),2),W=K[0],X=K[1],Y=(0,S.I0)();(0,o.useEffect)(function(){$()},[]);var $=(t=(0,i._)(function(){var e,t,n,i,r,a,l,d;return(0,s.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),Y((0,N.qu)(!0)),[4,(0,y.Ox)(g.id)];case 1:return(e=s.sent())&&0===e.errCode&&q(e.data),[3,4];case 2:return(null==(t=s.sent())?void 0:null===(i=t.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.errCode)===-4?(b.Am.error("Phi\xean bản đăng nhập hết hạn"),Y((0,P.ni)())):(null==t?void 0:null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.errCode)===2?b.Am.error("Thương hiệu kh\xf4ng tồn tại"):b.Am.error(null==t?void 0:null===(d=t.response)||void 0===d?void 0:null===(l=d.data)||void 0===l?void 0:l.message),[3,4];case 3:return Y((0,N.qu)(!1)),[7];case 4:return[2]}})}),function(){return t.apply(this,arguments)});(0,o.useEffect)(function(){k&&(Z("blogTitle",k.title),Z("blogDes",k.description),Z("isPublished",k.isPublished),O(k.image),"null"===k.content?(G(""),X("")):(G(k.content),X(k.contentHTML)))},[k,Z]);var ee=(n=(0,i._)(function(e){var t,n,i,r,a,l,d,o,u;return(0,s.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),Y((0,N.qu)(!0)),(t=new FormData).append("id",k.id),t.append("image",F),t.append("title",e.blogTitle),t.append("description",e.blogDes),t.append("isPublished",e.isPublished),t.append("content",V),t.append("contentHTML",W),[4,(0,y.Fv)(t)];case 1:return(n=s.sent())&&0===n.errCode&&(b.Am.success("Cập nhật b\xe0i viết th\xe0nh th\xe0nh c\xf4ng"),Z("blogTitle",""),Z("isPublished",""),G(""),X(""),O("/images/ImgNoProduct.png"),H(""),L.push("/blog")),[3,4];case 2:return(null==(i=s.sent())?void 0:null===(a=i.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.errCode)===4?b.Am.error("B\xe0i viết kh\xf4ng tồn tại"):(null==i?void 0:null===(d=i.response)||void 0===d?void 0:null===(l=d.data)||void 0===l?void 0:l.errCode)===-4?(b.Am.error("Phi\xean bản đăng nhập hết hạn"),Y((0,P.ni)())):b.Am.error(null==i?void 0:null===(u=i.response)||void 0===u?void 0:null===(o=u.data)||void 0===o?void 0:o.message),[3,4];case 3:return Y((0,N.qu)(!1)),[7];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),et=(f=(0,i._)(function(e){var t,n;return(0,s.Jh)(this,function(i){return(t=e.target.files[0])?(n=URL.createObjectURL(t),H(t),O(n),B(!1)):(H(""),O("/images/ImgNoProduct.png"),B(!0)),[2]})}),function(e){return f.apply(this,arguments)});return(0,d.jsxs)("form",{onSubmit:C(ee),className:"model-add-update",children:[(0,d.jsx)("h1",{className:"model-add-update-header",children:"Sửa th\xf4ng tin b\xe0i viết"}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:260},children:[(0,d.jsx)(z.default,{src:M,alt:"",height:230,width:180,style:{height:230,width:180,objectFit:"containt",borderRadius:10,border:"1px solid gray"}}),Q&&(0,d.jsx)("p",{style:{color:"red",fontSize:"var(--small-fontSize)",marginTop:"1rem"},children:"Tải h\xecnh ảnh \xe1p ph\xedch b\xe0i viết"})]}),(0,d.jsxs)(u.Z,{component:"label",variant:"contained",startIcon:(0,d.jsx)(v.Z,{}),sx:{height:"4rem"},children:["Tải ảnh l\xean",(0,d.jsx)(w,{type:"file",onChange:function(e){return et(e)}})]})]}),(0,d.jsxs)("div",{className:"modal-add-update-input-wrapper",children:[(0,d.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,d.jsx)("p",{className:"modal-add-update-input-label",children:"Ti\xeau đề"}),(0,d.jsx)(p.Qr,{control:I,name:"blogTitle",rules:{required:"Nhập ti\xeau đề b\xe0i viết"},render:function(e){var t=e.field;return(0,d.jsx)(c.Z,(0,a._)((0,r._)({},t),{error:!!D.blogTitle,InputProps:{style:{fontSize:"var(--text-fontSize)"}},variant:"filled",size:"small",hiddenLabel:!0,className:"modal-add-update-input-text-field"}))}}),D.blogTitle&&(0,d.jsx)("p",{className:"error-message-flex",children:D.blogTitle.message})]}),(0,d.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,d.jsx)("p",{className:"modal-add-update-input-label",children:"Trạng th\xe1i"}),(0,d.jsx)(p.Qr,{control:I,name:"isPublished",defaultValue:0,render:function(e){var t=e.field;return(0,d.jsxs)(c.Z,(0,a._)((0,r._)({},t),{error:!!D.isPublished,select:!0,variant:"filled",hiddenLabel:!0,InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field",SelectProps:{IconComponent:function(){return(0,d.jsx)(m.Z,{style:{fontSize:"3.5rem"}})}},children:[(0,d.jsx)(h.Z,{value:0,style:{fontSize:"var(--text-fontSize)"},children:"Nh\xe1p"}),(0,d.jsx)(h.Z,{value:1,style:{fontSize:"var(--text-fontSize)"},children:"Đăng b\xe0i"})]}))}}),D.isPublished&&(0,d.jsx)("p",{className:"error-message-flex",children:D.isPublished.message})]})]}),(0,d.jsx)("div",{className:"modal-add-update-input-wrapper",children:(0,d.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,d.jsx)("p",{className:"modal-add-update-input-label",children:"M\xf4 tả"}),(0,d.jsx)(p.Qr,{control:I,name:"blogDes",rules:{required:"Nhập m\xf4 tả b\xe0i viết"},render:function(e){var t=e.field;return(0,d.jsx)(c.Z,(0,a._)((0,r._)({},t),{error:!!D.blogDes,InputProps:{style:{fontSize:"var(--text-fontSize)"}},variant:"filled",size:"small",hiddenLabel:!0,className:"modal-add-update-input-text-field"}))}}),D.blogDes&&(0,d.jsx)("p",{className:"error-message-flex",children:D.blogDes.message})]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"modal-add-update-input-label",children:"Nội dung"}),(0,d.jsx)(x.ZP,{style:{width:"100%",height:"500px",fontSize:"var(--text-fontSize)",marginTop:"15px"},renderHTML:function(e){return T.render(e)},value:V,onChange:function(e){var t=e.html;G(e.text),X(t)}})]}),(0,d.jsx)(u.Z,{type:"submit",variant:"contained",className:"btn",style:{margin:"30px 0"},children:"Cập nhật"})]})}}},function(e){e.O(0,[9463,2171,9931,8436,1159,4444,8113,9343,769,2268,6648,1611,2416,2971,7023,1744],function(){return e(e.s=2934)}),_N_E=e.O()}]);