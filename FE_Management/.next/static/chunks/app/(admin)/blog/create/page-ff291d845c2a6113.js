(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5006],{16313:function(e,t,n){Promise.resolve().then(n.bind(n,54002))},54002:function(e,t,n){"use strict";n.r(t);var i=n(61943),a=n(7570),s=n(87029),l=n(47002),r=n(11735),d=n(57437),o=n(2265),u=n(76548),c=n(39234),p=n(39343),h=n(75870),m=n(37552),f=n(63931),x=n(92129),v=n.n(x),g=n(44819);n(38419);var b=n(33814);n(44193);var j=n(16463),N=n(32416),S=n(21159),y=n(27169),P=n(55922),_=n(48024),z=n(66648),T=new(v()),w=(0,_.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});t.default=function(){var e,t,n=(0,p.cI)(),x=n.handleSubmit,v=n.control,_=n.setValue,I=n.formState.errors,Z=(0,j.useRouter)(),D=(0,S.v9)(function(e){var t;return null===(t=e.user.userInfo)||void 0===t?void 0:t.id}),C=(0,l._)((0,o.useState)("/images/ImgNoProduct.png"),2),L=C[0],k=C[1],q=(0,l._)((0,o.useState)(""),2),R=q[0],A=q[1],E=(0,l._)((0,o.useState)(!1),2),M=E[0],O=E[1],Q=(0,l._)((0,o.useState)(""),2),F=Q[0],H=Q[1],J=(0,l._)((0,o.useState)(""),2),U=J[0],V=J[1],B=(0,S.I0)(),G=(e=(0,i._)(function(e){var t,n,i,a,s,l,d;return(0,r.Jh)(this,function(r){switch(r.label){case 0:if(!L||!R)return O(!0),[2];r.label=1;case 1:return r.trys.push([1,3,4,5]),B((0,N.qu)(!0)),(t=new FormData).append("image",R),t.append("userId",D),t.append("title",e.blogTitle),t.append("description",e.blogDes),t.append("isPublished",e.isPublished),t.append("content",F),t.append("contentHTML",U),[4,(0,y.y1)(t)];case 2:return(n=r.sent())&&0===n.errCode&&(b.Am.success("Th\xeam b\xe0i viết th\xe0nh c\xf4ng"),_("blogTitle",""),_("isPublished",""),_("blogDes",""),H(""),V(""),k("/images/ImgNoProduct.png"),A(""),Z.push("/blog")),[3,5];case 3:return(null==(i=r.sent())?void 0:null===(s=i.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.errCode)===-4?(b.Am.error("Phi\xean bản đăng nhập hết hạn"),B((0,P.ni)())):b.Am.error(null==i?void 0:null===(d=i.response)||void 0===d?void 0:null===(l=d.data)||void 0===l?void 0:l.message),[3,5];case 4:return B((0,N.qu)(!1)),[7];case 5:return[2]}})}),function(t){return e.apply(this,arguments)}),K=(t=(0,i._)(function(e){var t,n;return(0,r.Jh)(this,function(i){return(t=e.target.files[0])?(n=URL.createObjectURL(t),A(t),k(n),O(!1)):(A(""),k("/images/ImgNoProduct.png"),O(!0)),[2]})}),function(e){return t.apply(this,arguments)});return(0,d.jsxs)("form",{onSubmit:x(G),className:"model-add-update",children:[(0,d.jsx)("h1",{className:"model-add-update-header",children:"Th\xeam b\xe0i viết"}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:260},children:[(0,d.jsx)(z.default,{src:L,alt:"",height:230,width:180,style:{height:230,width:180,objectFit:"containt",borderRadius:10,border:"1px solid gray"}}),M&&(0,d.jsx)("p",{style:{color:"red",fontSize:"var(--small-fontSize)",marginTop:"1rem"},children:"Tải h\xecnh ảnh \xe1p ph\xedch b\xe0i viết"})]}),(0,d.jsxs)(u.Z,{component:"label",variant:"contained",startIcon:(0,d.jsx)(f.Z,{}),sx:{height:"4rem"},children:["Tải ảnh l\xean",(0,d.jsx)(w,{type:"file",onChange:function(e){return K(e)}})]})]}),(0,d.jsxs)("div",{className:"modal-add-update-input-wrapper",children:[(0,d.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,d.jsx)("p",{className:"modal-add-update-input-label",children:"Ti\xeau đề"}),(0,d.jsx)(p.Qr,{control:v,name:"blogTitle",rules:{required:"Nhập ti\xeau đề b\xe0i viết"},render:function(e){var t=e.field;return(0,d.jsx)(c.Z,(0,s._)((0,a._)({},t),{error:!!I.blogTitle,InputProps:{style:{fontSize:"var(--text-fontSize)"}},variant:"filled",size:"small",hiddenLabel:!0,className:"modal-add-update-input-text-field"}))}}),I.blogTitle&&(0,d.jsx)("p",{className:"error-message-flex",children:I.blogTitle.message})]}),(0,d.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,d.jsx)("p",{className:"modal-add-update-input-label",children:"Trạng th\xe1i"}),(0,d.jsx)(p.Qr,{control:v,name:"isPublished",defaultValue:0,render:function(e){var t=e.field;return(0,d.jsxs)(c.Z,(0,s._)((0,a._)({},t),{error:!!I.isPublished,select:!0,variant:"filled",hiddenLabel:!0,InputProps:{style:{fontSize:"var(--text-fontSize)"}},className:"modal-add-update-input-text-field",SelectProps:{IconComponent:function(){return(0,d.jsx)(m.Z,{style:{fontSize:"3.5rem"}})}},children:[(0,d.jsx)(h.Z,{value:0,style:{fontSize:"var(--text-fontSize)"},children:"Nh\xe1p"}),(0,d.jsx)(h.Z,{value:1,style:{fontSize:"var(--text-fontSize)"},children:"Đăng b\xe0i"})]}))}}),I.isPublished&&(0,d.jsx)("p",{className:"error-message-flex",children:I.isPublished.message})]})]}),(0,d.jsx)("div",{className:"modal-add-update-input-wrapper",children:(0,d.jsxs)("div",{className:"modal-add-update-input modal-add-update-input-flex",children:[(0,d.jsx)("p",{className:"modal-add-update-input-label",children:"M\xf4 tả"}),(0,d.jsx)(p.Qr,{control:v,name:"blogDes",rules:{required:"Nhập m\xf4 tả b\xe0i viết"},render:function(e){var t=e.field;return(0,d.jsx)(c.Z,(0,s._)((0,a._)({},t),{error:!!I.blogDes,InputProps:{style:{fontSize:"var(--text-fontSize)"}},variant:"filled",size:"small",hiddenLabel:!0,className:"modal-add-update-input-text-field"}))}}),I.blogDes&&(0,d.jsx)("p",{className:"error-message-flex",children:I.blogDes.message})]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"modal-add-update-input-label",children:"Nội dung"}),(0,d.jsx)(g.ZP,{style:{width:"100%",height:"500px",fontSize:"var(--text-fontSize)",marginTop:"15px"},renderHTML:function(e){return T.render(e)},value:F,onChange:function(e){var t=e.html;H(e.text),V(t)}})]}),(0,d.jsx)(u.Z,{type:"submit",variant:"contained",className:"btn",style:{margin:"30px 0"},children:"Th\xeam"})]})}}},function(e){e.O(0,[9463,2171,9931,8436,1159,4444,8113,9343,769,2268,6648,1611,2416,2971,7023,1744],function(){return e(e.s=16313)}),_N_E=e.O()}]);