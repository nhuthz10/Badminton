(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2517],{86334:function(e,n,r){Promise.resolve().then(r.bind(r,50320))},50320:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return O}});var t=r(61943),a=r(7570),i=r(87029),s=r(47002),c=r(85993),u=r(11735),o=r(57437),l=r(2265),d=r(87138),p=r(6920),h=r(45079),m=r(98920),f=r(51005),v=r(21159),x=r(58433),g=r(60761),j=r(23761),N=r(95888),b=r(91606);r(90855);var y=r(62279),w=r(28325),k=r(70766),C=r(41131),_=r(66648),I=r(29982),P=r(33814),D=r(55922),Z=r(32141),T=r(58438);r(16463);var B=r(43298);r(1042);var S=new Intl.NumberFormat("vi-VN",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}),L=function(e){var n=e.type,r=e.brands,t=e.priceValue,u=e.handleChangePrice,d=e.handleCheckBrands,p=e.checkBrands,h=(0,s._)((0,l.useState)([]),2),m=h[0],f=h[1];return(0,l.useEffect)(function(){r&&((0,c._)(r),f(null==r?void 0:r.map(function(e){return p.includes(null==e?void 0:e.brandId)?(0,i._)((0,a._)({},e),{checked:!0}):(0,i._)((0,a._)({},e),{checked:!1})})))},[p,r]),(0,o.jsxs)("div",{className:"product-sidebar-container",style:{width:"drawer"===n?"none":"22rem",height:"drawer"===n?"none":"65rem",marginRight:"drawer"===n?"none":"2rem",border:"drawer"===n?"none":"0.2rem solid var(--gray-color)"},children:[(0,o.jsxs)("div",{className:"sidebar-item",children:[(0,o.jsx)("h1",{className:"sidebar-item-title",children:"Thương hiệu"}),(0,o.jsx)("div",{className:"sidebar-line"}),m&&m.length>0&&m.map(function(e,n){return(0,o.jsxs)("div",{className:"sidebar-content",children:[(0,o.jsx)("p",{children:e.brandName}),(0,o.jsx)("input",{checked:e.checked||!1,type:"checkbox",value:e.brandId,onChange:d})]},n)})]}),(0,o.jsxs)("div",{className:"sidebar-item",children:[(0,o.jsx)("h1",{className:"sidebar-item-title",children:"Mức gi\xe1"}),(0,o.jsx)("div",{className:"sidebar-line"}),(0,o.jsx)(B.ZP,{getAriaLabel:function(){return"Default"},valueLabelDisplay:"off",step:5e5,value:t,onChange:u,min:0,max:1e7,className:"price-slider",style:{color:"var(--second-color)"}}),(0,o.jsxs)("div",{className:"price-slider-value",children:[(0,o.jsx)("span",{children:S.format(t[0])}),(0,o.jsx)("span",{children:S.format(t[1])})]})]})]})};r(14947);var V=function(e){var n=e.isOpenDrawer,r=e.setIsOpenDrawer,t=e.brands,a=e.priceValue,i=e.checkBrands,s=e.handleChangePrice,c=e.handleCheckBrands;return(0,o.jsx)(T.ZP,{open:n,onClose:function(){r(!1)},anchor:"right",children:(0,o.jsx)("div",{className:"drawer-filter-container",children:(0,o.jsx)(L,{type:"drawer",brands:t,priceValue:a,handleChangePrice:s,handleCheckBrands:c,checkBrands:i})})})},A=r(81705),F=new Intl.NumberFormat("vi-VN",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}),O=function(e){var n,r,T=e.params,B=(0,s._)((0,l.useState)({}),2),S=B[0],O=B[1],E=(0,s._)((0,l.useState)(!1),2),R=E[0],z=E[1],M=(0,s._)((0,l.useState)([]),2),J=M[0],U=M[1],G=(0,s._)((0,l.useState)(I.MR[0]),2),W=G[0],H=G[1],K=(0,s._)((0,l.useState)([I.zR,I.LZ]),2),X=K[0],Y=K[1],$=(0,v.I0)(),q=(0,v.v9)(function(e){return e.product.allProductOfTheProductType.data}),Q=(0,s._)((0,l.useState)([]),2),ee=Q[0],en=Q[1],er=(0,v.v9)(function(e){var n,r;return null===(r=e.product)||void 0===r?void 0:null===(n=r.allBrand)||void 0===n?void 0:n.data}),et=(0,v.v9)(function(e){return e.product.isLoading}),ea=(0,v.v9)(function(e){var n;return null===(n=e.user.userInfo)||void 0===n?void 0:n.id}),ei=(0,v.v9)(function(e){var n;return null===(n=e.user)||void 0===n?void 0:n.favourites}),es=T.productTypeId.split("-"),ec=es[es.length-1].toUpperCase(),eu=(0,b.Nr)(J,500),eo=(0,b.Nr)(X,500),el=(n=(0,t._)(function(){var e,n,r,t;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,C.jm)(ec)];case 1:return(e=a.sent())&&0===e.errCode&&O(null==e?void 0:e.data),[3,3];case 2:return n=a.sent(),P.Am.error(null==n?void 0:null===(t=n.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message,{className:"toast-normal"}),[3,3];case 3:return[2]}})}),function(){return n.apply(this,arguments)});(0,l.useEffect)(function(){el()},[ec]),(0,l.useEffect)(function(){$((0,w.uu)(W.id)),$((0,Z.A6)(1)),$((0,w.xt)({brandId:eu,price:eo}))},[eu,eo,W]);var ed=function(e,n){Y(n)},ep=function(e){H(e)},eh=function(e){var n=e.target,r=n.value;n.checked?U(function(e){return(0,c._)(e).concat([r])}):U(function(e){return e.filter(function(e){return e!==r})})};(0,l.useEffect)(function(){ei&&(null==ei?void 0:ei.length)>0?en(null==q?void 0:q.map(function(e){var n=(0,a._)({},e);return n.favourite=null==ei?void 0:ei.includes(e.productId),n})):en(q)},[ei,q]);var em=(r=(0,t._)(function(e,n){var r,t,a,i,s,c,o,l,d;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(!ea)return[3,12];u.label=1;case 1:if(u.trys.push([1,10,,11]),"like"!==n)return[3,5];return[4,(0,k.n8)(ea,e)];case 2:if(!((r=u.sent())&&0===r.errCode))return[3,4];return[4,(0,k.UW)(ea)];case 3:return t=u.sent(),$((0,D.dG)(null==t?void 0:t.data)),[3,5];case 4:P.Am.error(null==r?void 0:r.message,{className:"toast-normal"}),u.label=5;case 5:if("noLike"!==n)return[3,9];return[4,(0,k.VP)({productId:e,userId:ea})];case 6:if(!((a=u.sent())&&0===a.errCode))return[3,8];return[4,(0,k.UW)(ea)];case 7:return i=u.sent(),$((0,D.dG)(null==i?void 0:i.data)),[3,9];case 8:P.Am.error(null==a?void 0:a.message,{className:"toast-normal"}),u.label=9;case 9:return[3,11];case 10:return console.log(s=u.sent()),(null==s?void 0:null===(o=s.response)||void 0===o?void 0:null===(c=o.data)||void 0===c?void 0:c.errCode)===-4?(P.Am.error("Phi\xean bản đăng nhập hết hạn",{className:"toast-normal"}),$((0,D.ni)())):P.Am.error(null==s?void 0:null===(d=s.response)||void 0===d?void 0:null===(l=d.data)||void 0===l?void 0:l.message,{className:"toast-normal"}),[3,11];case 11:return[3,13];case 12:P.Am.error("Vui l\xf2ng đăng nhập",{className:"toast-normal"}),u.label=13;case 13:return[2]}})}),function(e,n){return r.apply(this,arguments)});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"product-page",children:[(0,o.jsx)("div",{className:"product-wrap-filter",onClick:function(){return z(!0)},children:(0,o.jsx)(j.Z,{className:"filter-icon"})}),(0,o.jsx)("div",{className:"product-wrap-sidebar",children:(0,o.jsx)(L,{brands:er,priceValue:X,checkBrands:J,handleChangePrice:ed,handleCheckBrands:eh})}),(0,o.jsxs)("div",{className:"product-content",children:[(0,o.jsxs)("div",{className:"sort-container",children:[(0,o.jsx)("h1",{className:"product-type-title",children:null==S?void 0:S.productTypeName}),(0,o.jsxs)("div",{className:"sort-content",children:[(0,o.jsxs)("div",{className:"sort-title",children:[(0,o.jsx)(p.G,{icon:h.MdH}),(0,o.jsx)("span",{children:"Sắp xếp: "})]}),(0,o.jsx)(m.ZP,{interactive:!0,placement:"bottom",delay:[0,300],offset:[0,4],render:function(e){return(0,o.jsx)("div",(0,i._)((0,a._)({className:"dropdown-sort",tabIndex:"-1"},e),{children:I.MR.map(function(e,n){return e.value!==W.value?(0,o.jsx)("button",{onClick:function(){return ep(e)},children:e.value},n):null})}))},children:(0,o.jsxs)("div",{className:"sort-value",children:[(0,o.jsx)("p",{children:W.value}),(0,o.jsx)("div",{className:"sort-underline"})]})})]})]}),(0,o.jsx)("div",{className:"list-product",children:(null==ee?void 0:ee.length)!==0||et?(0,o.jsx)(A.Z,{theme:b.rS,children:(0,o.jsx)(x.ZP,{container:!0,rowSpacing:{xl:1.5,lg:1.5,md:2,sm:2,xs:2},columnSpacing:{xl:1.5,lg:1.5,md:2,sm:2,xs:2},children:(null==ee?void 0:ee.length)>0&&(null==ee?void 0:ee.map(function(e,n){var r;return(0,o.jsx)(x.ZP,{item:!0,xl:3,lg:4,md:4,sm:6,xs:12,children:(0,o.jsxs)(d.default,{href:"/".concat((0,b.Np)(e.productTypeData.productTypeName),"-").concat(e.productTypeData.productTypeId.toLowerCase(),"/").concat((0,b.Np)(e.name),"-").concat(e.productId.toLowerCase()),className:"product-item",children:[(0,o.jsx)(_.default,{src:e.image,className:"product-img",width:0,height:0,sizes:"100vw",style:{objectFit:(null===(r=e.productTypeData)||void 0===r?void 0:r.productTypeName)==="\xc1o cầu l\xf4ng"?"cover":"contain"},alt:"product"}),(0,o.jsx)("button",{className:"favourite-btn",onClick:function(e){e.preventDefault()},children:e.favourite?(0,o.jsx)(N.Z,{onClick:function(){em(e.productId,"like")},className:"favourite-icon",style:{color:"red"}}):(0,o.jsx)(g.Z,{className:"favourite-icon",onClick:function(){em(e.productId,"noLike")}})}),(0,o.jsxs)("div",{className:"product-infor",children:[(0,o.jsx)("p",{className:"product-name",children:e.name}),(0,o.jsxs)("div",{className:"product-rating",children:[(0,o.jsx)(f.Z,{defaultValue:0,value:e.rating,precision:.5,readOnly:!0,style:{fontSize:"2.5rem",marginLeft:"0.5rem"}}),(0,o.jsxs)("p",{style:{lineHeight:1.5},children:[e.rating,"/",(0,o.jsx)("span",{children:"5"})]})]}),(0,o.jsxs)("div",{className:"product-price",children:[(0,o.jsxs)("p",{style:{color:0!==e.discount?"rgba(0,0,0,.54)":"var(--primary-color)",textDecoration:0!==e.discount?"line-through":"",marginRight:10},children:[F.format(e.price),(0,o.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]}),0!==e.discount?(0,o.jsxs)("p",{children:[F.format(e.price-e.price*e.discount/100),(0,o.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]}):null]})]})]})},n)}))})}):(0,o.jsxs)("div",{className:"no-product",children:[(0,o.jsx)("h1",{children:"Kh\xf4ng c\xf3 sản phẩm n\xe0o"}),(0,o.jsx)(_.default,{src:"/images/noProduct.png",height:315,width:315,sizes:"100vw",alt:":(("})]})}),(0,o.jsx)("div",{className:"line-wrapper",children:(0,o.jsx)("span",{className:"line"})}),(0,o.jsx)("div",{style:{marginTop:50},children:(0,o.jsx)(y.Z,{type:"user-product",productTypeId:ec})})]})]}),(0,o.jsx)(V,{isOpenDrawer:R,setIsOpenDrawer:z,brands:er,checkBrands:J,priceValue:X,handleChangePrice:ed,handleCheckBrands:eh})]})}},70766:function(e,n,r){"use strict";r.d(n,{Ak:function(){return f},C6:function(){return d},F$:function(){return u},Md:function(){return o},Rm:function(){return h},UW:function(){return g},VP:function(){return v},a5:function(){return j},gY:function(){return p},n8:function(){return x},p_:function(){return l},yX:function(){return m}});var t,a,i=r(61943),s=r(11735),c=r(15149),u=function(e,n){return c.ZP.post("/api/user/login-user",{email:e,password:n})},o=(t=(0,i._)(function(e){return(0,s.Jh)(this,function(n){switch(n.label){case 0:return[4,c.v4.get("/api/user/get-user-infor?userId=".concat(e))];case 1:return[2,n.sent()]}})}),function(e){return t.apply(this,arguments)}),l=function(e){return c.ZP.post("/api/user/register",e)},d=function(e){return c.ZP.post("/api/user/send-otp-code",{email:e})},p=function(e){return c.ZP.put("/api/user/change-password",e)},h=function(e){return c.v4.get("/api/user/get-user?id=".concat(e))},m=function(e){return c.v4.put("/api/user/update-user",e)},f=function(e){return c.v4.put("/api/user/change-password-profile",e)},v=function(e){return c.v4.post("/api/favourite/create-favourite",e)},x=function(e,n){return c.v4.delete("/api/favourite/delete-favourite?userId=".concat(e,"&productId=").concat(n))},g=function(e){return c.v4.get("/api/favourite/get-all-favourite?userId=".concat(e))},j=(a=(0,i._)(function(e){return(0,s.Jh)(this,function(n){switch(n.label){case 0:return[4,c.ZP.post("/api/user/refresh-token",{},{headers:{Authorization:"Bearer ".concat(e)}})];case 1:return[2,n.sent()]}})}),function(e){return a.apply(this,arguments)})},90855:function(){},14947:function(){},1042:function(){}},function(e){e.O(0,[6765,8147,3676,3216,4036,1159,9562,6648,6920,7746,7762,4866,8433,2591,1005,1174,363,6641,8325,2279,2971,7023,1744],function(){return e(e.s=86334)}),_N_E=e.O()}]);