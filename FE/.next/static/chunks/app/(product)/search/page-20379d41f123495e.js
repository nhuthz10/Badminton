(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1543],{8469:function(e,n,r){Promise.resolve().then(r.bind(r,64726))},64726:function(e,n,r){"use strict";r.r(n);var t=r(61943),i=r(7570),u=r(47002),a=r(11735),o=r(57437),s=r(2265),c=r(62279),l=r(60761),d=r(95888),p=r(51005),f=r(66648),v=r(70766),m=r(55922),h=r(33814),g=r(21159),x=r(87138),j=r(58433),N=r(86970),y=r(91606);r(59723);var b=new Intl.NumberFormat("vi-VN",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0});n.default=function(){var e,n=(0,u._)((0,s.useState)([]),2),r=n[0],w=n[1],I=(0,g.v9)(function(e){var n;return null===(n=e.user.userInfo)||void 0===n?void 0:n.id}),k=(0,g.v9)(function(e){var n;return null===(n=e.user)||void 0===n?void 0:n.favourites}),P=(0,g.v9)(function(e){return e.search.allResultSearch.data}),_=(0,g.I0)();(0,s.useEffect)(function(){k&&(null==k?void 0:k.length)>0?w(null==P?void 0:P.map(function(e){var n=(0,i._)({},e);return n.favourite=null==k?void 0:k.includes(e.productId),n})):w(P)},[k,P]);var C=(e=(0,t._)(function(e,n){var r,t,i,u,o,s,c,l,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!I)return[3,12];a.label=1;case 1:if(a.trys.push([1,10,,11]),"like"!==n)return[3,5];return[4,(0,v.n8)(I,e)];case 2:if(!((r=a.sent())&&0===r.errCode))return[3,4];return[4,(0,v.UW)(I)];case 3:return t=a.sent(),_((0,m.dG)(null==t?void 0:t.data)),[3,5];case 4:h.Am.error(null==r?void 0:r.message,{className:"toast-normal"}),a.label=5;case 5:if("noLike"!==n)return[3,9];return[4,(0,v.VP)({productId:e,userId:I})];case 6:if(!((i=a.sent())&&0===i.errCode))return[3,8];return[4,(0,v.UW)(I)];case 7:return u=a.sent(),_((0,m.dG)(null==u?void 0:u.data)),[3,9];case 8:h.Am.error(null==i?void 0:i.message,{className:"toast-normal"}),a.label=9;case 9:return[3,11];case 10:return console.log(o=a.sent()),(null==o?void 0:null===(c=o.response)||void 0===c?void 0:null===(s=c.data)||void 0===s?void 0:s.errCode)===-4?(h.Am.error("Phi\xean bản đăng nhập hết hạn",{className:"toast-normal"}),_((0,m.ni)())):h.Am.error(null==o?void 0:null===(d=o.response)||void 0===d?void 0:null===(l=d.data)||void 0===l?void 0:l.message,{className:"toast-normal"}),[3,11];case 11:return[3,13];case 12:h.Am.error("Vui l\xf2ng đăng nhập",{className:"toast-normal"}),a.label=13;case 13:return[2]}})}),function(n,r){return e.apply(this,arguments)});return(0,o.jsxs)("div",{className:"search-page-container",children:[(0,o.jsx)(N.f6,{theme:y.rS,children:(0,o.jsx)(j.ZP,{container:!0,rowSpacing:{xl:3,lg:3,md:2,sm:2,xs:2},columnSpacing:{xl:3,lg:3,md:2,sm:2,xs:2},children:r&&(null==r?void 0:r.length)>0?null==r?void 0:r.map(function(e,n){var r;return(0,o.jsx)(j.ZP,{item:!0,xl:3,lg:4,md:6,sm:6,xs:12,children:(0,o.jsxs)(x.default,{href:"/".concat((0,y.Np)(e.productTypeData.productTypeName),"-").concat(e.productTypeData.productTypeId.toLowerCase(),"/").concat((0,y.Np)(e.name),"-").concat(e.productId.toLowerCase()),className:"productWrapper",children:[(0,o.jsx)(f.default,{src:e.image,width:0,height:450,sizes:"100vw",style:{objectFit:(null===(r=e.productTypeData)||void 0===r?void 0:r.productTypeName)==="\xc1o cầu l\xf4ng"?"cover":"contain"},className:"productImg",alt:"product"}),(0,o.jsx)("button",{className:"favorite",onClick:function(e){e.preventDefault()},children:e.favourite?(0,o.jsx)(d.Z,{onClick:function(){C(e.productId,"like")},className:"icon",style:{color:"red"}}):(0,o.jsx)(l.Z,{className:"icon",onClick:function(){C(e.productId,"noLike")}})}),(0,o.jsxs)("div",{className:"productInfo",children:[(0,o.jsx)("p",{className:"productName",children:e.name}),(0,o.jsxs)("div",{className:"productRating",children:[(0,o.jsx)(p.Z,{defaultValue:0,value:e.rating,precision:.5,readOnly:!0,style:{fontSize:"2.5rem"}}),(0,o.jsxs)("p",{style:{lineHeight:1.5},children:[e.rating,"/",(0,o.jsx)("span",{children:"5"})]})]}),(0,o.jsxs)("div",{className:"productPrice",children:[(0,o.jsxs)("p",{style:{color:0!==e.discount?"rgba(0,0,0,.54)":"var(--primary-color)",textDecoration:0!==e.discount?"line-through":"",marginRight:10},children:[b.format(e.price),(0,o.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]}),0!==e.discount?(0,o.jsxs)("p",{children:[b.format(e.price-e.price*e.discount/100),(0,o.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]}):null]})]})]})},n)}):(0,o.jsxs)("div",{className:"no-product",children:[(0,o.jsx)("h1",{children:"Kh\xf4ng c\xf3 b\xe0i viết n\xe0o"}),(0,o.jsx)(f.default,{src:"/images/noProduct.png",height:315,width:315,sizes:"100vw",alt:":(("})]})})}),(0,o.jsx)("div",{style:{marginTop:50},children:(0,o.jsx)(c.Z,{type:"search-product"})})]})}},70766:function(e,n,r){"use strict";r.d(n,{Ak:function(){return m},C6:function(){return d},F$:function(){return s},Md:function(){return c},Rm:function(){return f},UW:function(){return x},VP:function(){return h},a5:function(){return j},gY:function(){return p},n8:function(){return g},p_:function(){return l},yX:function(){return v}});var t,i,u=r(61943),a=r(11735),o=r(15149),s=function(e,n){return o.ZP.post("/api/user/login-user",{email:e,password:n})},c=(t=(0,u._)(function(e){return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,o.v4.get("/api/user/get-user-infor?userId=".concat(e))];case 1:return[2,n.sent()]}})}),function(e){return t.apply(this,arguments)}),l=function(e){return o.ZP.post("/api/user/register",e)},d=function(e){return o.ZP.post("/api/user/send-otp-code",{email:e})},p=function(e){return o.ZP.put("/api/user/change-password",e)},f=function(e){return o.v4.get("/api/user/get-user?id=".concat(e))},v=function(e){return o.v4.put("/api/user/update-user",e)},m=function(e){return o.v4.put("/api/user/change-password-profile",e)},h=function(e){return o.v4.post("/api/favourite/create-favourite",e)},g=function(e,n){return o.v4.delete("/api/favourite/delete-favourite?userId=".concat(e,"&productId=").concat(n))},x=function(e){return o.v4.get("/api/favourite/get-all-favourite?userId=".concat(e))},j=(i=(0,u._)(function(e){return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,o.ZP.post("/api/user/refresh-token",{},{headers:{Authorization:"Bearer ".concat(e)}})];case 1:return[2,n.sent()]}})}),function(e){return i.apply(this,arguments)})},59723:function(){}},function(e){e.O(0,[8147,3676,3216,4036,1159,9562,6648,6920,7746,7762,4866,8433,1005,6970,8164,8325,2279,2971,7023,1744],function(){return e(e.s=8469)}),_N_E=e.O()}]);