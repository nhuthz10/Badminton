(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{16288:function(e,t,n){Promise.resolve().then(n.t.bind(n,75326,23)),Promise.resolve().then(n.t.bind(n,12731,23)),Promise.resolve().then(n.bind(n,50502)),Promise.resolve().then(n.bind(n,85987))},85987:function(e,t,n){"use strict";n.d(t,{default:function(){return k}});var r=n(57437),s=n(21159),o=n(57818),a=n(64359),i=n(33814);n(44193);var c=n(12784),u=n(61943),l=n(11735),h=n(15149),f=n(49714),d=n(70766),m=n(55922),g={getItem:function(e){return"true"===localStorage.getItem("isSaveLogin")?localStorage.getItem(e):sessionStorage.getItem(e)},setItem:function(e,t){"true"===localStorage.getItem("isSaveLogin")?localStorage.setItem(e,t):sessionStorage.setItem(e,t)}},p=function(e){var t,n,o=e.children,a=(0,s.I0)(),c=!1,p=[],v=function(e){p.push(e)},k=function(e){p.forEach(function(t){return t(e)}),p=[]},b=(t=(0,u._)(function(){var e,t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(c)return[3,5];c=!0,r.label=1;case 1:return r.trys.push([1,3,,4]),e=g.getItem("refresh_token"),[4,(0,d.a5)(e)];case 2:return t=r.sent(),g.setItem("access_token",t.access_token),c=!1,k(t.access_token),[2,t.access_token];case 3:throw n=r.sent(),c=!1,console.error("Failed to refresh token",n),a((0,m.ni)()),i.Am.error("Phi\xean đăng nhập đ\xe3 hết hạn",{className:"toast-normal"}),n;case 4:return[3,6];case 5:return[2,new Promise(function(e){v(function(t){e(t)})})];case 6:return[2]}})}),function(){return t.apply(this,arguments)});return h.v4.interceptors.request.use((n=(0,u._)(function(e){var t,n,r,s,o,c;return(0,l.Jh)(this,function(u){switch(u.label){case 0:if(t=g.getItem("access_token"),n=g.getItem("refresh_token"),!t||!n)return a((0,m.ni)()),i.Am.error("Phi\xean đăng nhập đ\xe3 hết hạn",{className:"toast-normal"}),[2,Promise.reject("No tokens available")];if(r=new Date,s=(0,f.o)(t),o=(0,f.o)(n),!((null==s?void 0:s.exp)<r.getTime()/1e3))return[3,7];if(!((null==o?void 0:o.exp)>r.getTime()/1e3))return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,b()];case 2:return c=u.sent(),e.headers.Authorization="Bearer ".concat(c),[2,e];case 3:return[2,Promise.reject(u.sent())];case 4:return[3,6];case 5:return a((0,m.ni)()),i.Am.error("Phi\xean đăng nhập đ\xe3 hết hạn",{className:"toast-normal"}),[2,Promise.reject("Refresh token expired")];case 6:return[3,8];case 7:return e.headers.Authorization="Bearer ".concat(t),[2,e];case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),function(e){return Promise.reject(e)}),(0,r.jsx)(r.Fragment,{children:o})},v=(0,o.default)(function(){return n.e(4504).then(n.bind(n,14504)).then(function(e){return e.PersistGate})},{loadableGenerated:{webpack:function(){return[14504]}},ssr:!1}),k=function(e){var t=e.children;return(0,r.jsxs)(s.zt,{store:a.ZP,children:[(0,r.jsx)(v,{loading:null,persistor:a.Dj,children:(0,r.jsx)(c.Z,{children:(0,r.jsx)(p,{children:t})})}),(0,r.jsx)(i.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]})}},12784:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(47002),s=n(57437),o=n(45040),a=n(2265),i=n(33814),c=(0,a.createContext)(null),u=function(){return(0,a.useContext)(c)};t.Z=function(e){var t=e.children,n=(0,r._)((0,a.useState)(null),2),u=n[0],l=n[1];return(0,a.useEffect)(function(){var e=(0,o.io)("http://localhost:8080");return l(e),function(){e.disconnect()}},[]),(0,a.useEffect)(function(){if(u)return u.on("notify-order-succeed",function(e){var t;(0,i.Am)("".concat(null==e?void 0:null===(t=e.UserData)||void 0===t?void 0:t.email," vừa mới đặt h\xe0ng th\xe0nh c\xf4ng"),{position:"bottom-left",className:"toast-big",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"dark"})}),function(){u.off("notify-order-succeed")}},[u]),(0,s.jsx)(c.Provider,{value:u,children:t})}},50502:function(e,t,n){"use strict";var r=n(57437),s=n(2265),o=n(31877);n(76068),t.default=function(){return(0,s.useEffect)(function(){window.ZaloChatWidget&&window.ZaloChatWidget()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"zalo-chat-widget","data-oaid":"2253048925575254414","data-welcome-message":"Rất vui khi được hỗ trợ bạn!","data-autopopup":"30","data-width":"","data-height":""}),(0,r.jsx)(o.default,{strategy:"lazyOnload",src:"https://sp.zalo.me/plugins/sdk.js"})]})}},12731:function(){},76068:function(){}},function(e){e.O(0,[2171,8771,3216,4036,1159,5040,7143,420,8325,9806,2971,7023,1744],function(){return e(e.s=16288)}),_N_E=e.O()}]);