(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8769],{41338:function(e,n,t){Promise.resolve().then(t.bind(t,40449))},12784:function(e,n,t){"use strict";t.d(n,{s:function(){return c}});var r=t(47002),i=t(57437),o=t(45040),a=t(2265),s=t(33814),l=(0,a.createContext)(null),c=function(){return(0,a.useContext)(l)};n.Z=function(e){var n=e.children,t=(0,r._)((0,a.useState)(null),2),c=t[0],u=t[1];return(0,a.useEffect)(function(){var e=(0,o.io)("http://localhost:8080");return u(e),function(){e.disconnect()}},[]),(0,a.useEffect)(function(){if(c)return c.on("notify-order-succeed",function(e){var n;(0,s.Am)("".concat(null==e?void 0:null===(n=e.UserData)||void 0===n?void 0:n.email," vừa mới đặt h\xe0ng th\xe0nh c\xf4ng"),{position:"bottom-left",className:"toast-big",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"dark"})}),function(){c.off("notify-order-succeed")}},[c]),(0,i.jsx)(l.Provider,{value:c,children:n})}},40449:function(e,n,t){"use strict";t.r(n);var r=t(61943),i=t(47002),o=t(11735),a=t(57437),s=t(2265),l=t(58433),c=t(91326),u=t(38550);t(34511);var d=t(62737),h=t.n(d),v=t(66648),m=t(33814),f=t(21159),p=t(16463),g=t(32141),x=t(55922),j=t(86970),y=t(91606),N=t(12784),I=new Intl.NumberFormat("vi-VN",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0});n.default=function(e){var n,t,d,b,D,_,P,C,S,k,w,A=e.params,L=(0,i._)((0,s.useState)({}),2),Z=L[0],R=L[1],B=(0,i._)((0,s.useState)(null),2),E=B[0],O=B[1],Y=(0,i._)((0,s.useState)(null),2),T=Y[0],U=Y[1],V=(0,f.v9)(function(e){var n;return null===(n=e.user.userInfo)||void 0===n?void 0:n.id}),F=(0,N.s)(),M=(0,f.I0)(),J=(0,p.useRouter)(),G=(n=(0,r._)(function(){var e,n,t,r,i,a,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(0,u.JY)(A.orderId,V)];case 1:if((e=o.sent())&&0===e.errCode)switch(R(null==e?void 0:e.data),null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.status){case 1:O("Chờ x\xe1c nhận");break;case 2:O("Đang giao");break;case 3:O("Đ\xe3 giao");break;case 0:O("Đ\xe3 hủy")}return[3,3];case 2:return console.log(t=o.sent()),(null==t?void 0:null===(i=t.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.errCode)===-4?(m.Am.error("Phi\xean bản đăng nhập hết hạn",{className:"toast-normal"}),M((0,x.ni)())):m.Am.error(null==t?void 0:null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message,{className:"toast-normal"}),[3,3];case 3:return[2]}})}),function(){return n.apply(this,arguments)});(0,s.useEffect)(function(){U(new URLSearchParams(window.location.search).get("vnp_ResponseCode"))},[]),(0,s.useEffect)(function(){T&&"00"===T&&(m.Am.success("Đặt h\xe0ng th\xe0nh c\xf4ng",{className:"toast-normal"}),J.push("/user/orders/".concat(A.orderId)))},[T]),(0,s.useEffect)(function(){G(A.orderId)},[A.orderId]);var H=(t=(0,r._)(function(){var e,n,t,r,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(0,u.Q2)({userId:V,orderId:A.orderId,orderDetail:null==Z?void 0:Z.orderDetail})];case 1:return(e=o.sent())&&0===e.errCode&&(F.emit("cancel-order-succeed",A.orderId),m.Am.success("Hũy đơn h\xe0ng th\xe0nh c\xf4ng",{className:"toast-normal"}),M((0,g.A6)(1)),J.push("/user/orders")),[3,3];case 2:return console.log(n=o.sent()),(null==n?void 0:null===(r=n.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.errCode)===-4?(m.Am.error("Phi\xean bản đăng nhập hết hạn",{className:"toast-normal"}),M((0,x.ni)())):m.Am.error(null==n?void 0:null===(a=n.response)||void 0===a?void 0:null===(i=a.data)||void 0===i?void 0:i.message,{className:"toast-normal"}),[3,3];case 3:return[2]}})}),function(){return t.apply(this,arguments)});return(0,a.jsxs)("div",{className:"order-detail-container",children:[(0,a.jsxs)("div",{className:"order-detail-infor",children:[(0,a.jsxs)("div",{className:"information",children:[(0,a.jsxs)("h3",{style:{marginBottom:6},children:["M\xe3 đơn h\xe0ng: ",null==Z?void 0:Z.orderId]}),(0,a.jsxs)("h3",{style:{marginBottom:6},children:["Ng\xe0y đặt h\xe0ng: ",(d=new Date(null==Z?void 0:Z.createdAt),h()(d).format("DD/MM/YYYY"))]}),(0,a.jsxs)("h3",{style:{marginBottom:6},children:["T\xecnh trạng đơn h\xe0ng: ",E]})]}),(0,a.jsxs)("div",{className:"information",children:[(0,a.jsxs)("h3",{style:{marginBottom:6},children:["Người nhận: ",null==Z?void 0:null===(b=Z.UserData)||void 0===b?void 0:b.userName]}),(0,a.jsxs)("h3",{style:{marginBottom:6},children:["Số điện thoại: ",null==Z?void 0:null===(D=Z.UserData)||void 0===D?void 0:D.phoneNumber]}),(0,a.jsxs)("h3",{style:{marginBottom:6},children:["Địa chỉ nhận h\xe0ng: ",null==Z?void 0:Z.deliveryAddress]})]}),(0,a.jsxs)("div",{className:"information",children:[(0,a.jsx)("h3",{style:{marginBottom:6},children:"Phương thức thanh to\xe1n:"}),(null==Z?void 0:Z.payment)==="COD"?(0,a.jsx)("h3",{children:"Thanh to\xe1n khi nhận h\xe0ng (COD)"}):(null==Z?void 0:Z.payment)==="PAYPAL"?(0,a.jsx)("h3",{children:"Thanh to\xe1n bằng Paypal"}):(0,a.jsx)("h3",{children:"Thanh to\xe1n bằng VNPAY"})]})]}),(0,a.jsx)(j.f6,{theme:y.rS,children:(0,a.jsx)(l.ZP,{container:!0,spacing:3,className:"order-detail-products",children:(null==Z?void 0:null===(_=Z.orderDetail)||void 0===_?void 0:_.length)>0&&(null==Z?void 0:null===(P=Z.orderDetail)||void 0===P?void 0:P.map(function(e,n){return(0,a.jsx)(l.ZP,{item:!0,xl:6,lg:6,md:6,sm:6,xs:12,children:(0,a.jsxs)(c.Z,{className:"productDetail",children:[(0,a.jsx)(v.default,{style:{marginRight:20,borderRadius:4},src:e.image,height:100,width:100,alt:"thumb",className:"thumbnail"}),(0,a.jsxs)("div",{className:"info",children:[(0,a.jsx)("div",{className:"infor-name",children:e.name}),(0,a.jsxs)("div",{style:{display:"flex",margin:"8px 0"},children:[(0,a.jsxs)("div",{style:{color:0!==e.discount?"rgba(0,0,0,.54)":"",textDecoration:0!==e.discount?"line-through":"",marginRight:10},children:[I.format(e.price),(0,a.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]}),0!==e.discount?(0,a.jsxs)("div",{children:[I.format(e.price-e.price*e.discount/100),(0,a.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]}):null]}),(0,a.jsxs)("div",{style:{marginBottom:"8px"},children:["K\xedch cỡ: ",e.sizeName]}),(0,a.jsxs)("div",{children:["Số lượng: ",e.quantity]}),(0,a.jsxs)("p",{style:{color:"red"},children:[I.format(e.totalPrice),(0,a.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]})]})]})},n)}))})}),(0,a.jsx)("div",{className:"pay-contact-container",children:(0,a.jsxs)("div",{className:"pay-contact",children:[(0,a.jsxs)("div",{className:"pay_discount",children:[(0,a.jsxs)("div",{className:"pay",children:[(0,a.jsx)("p",{className:"txt_price",children:"Tổng cộng:"}),(0,a.jsxs)("div",{className:"price",children:[(null==Z?void 0:null===(C=Z.VoucherData)||void 0===C?void 0:C.voucherId)?I.format((null==Z?void 0:Z.totalPrice)-3e4+(null==Z?void 0:null===(S=Z.VoucherData)||void 0===S?void 0:S.voucherPrice)):I.format((null==Z?void 0:Z.totalPrice)-3e4),(0,a.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]})]}),(0,a.jsxs)("div",{className:"pay",children:[(0,a.jsx)("p",{className:"txt_price",children:"Ph\xed vận chuyển:"}),(0,a.jsxs)("p",{className:"price",children:[I.format(3e4),(0,a.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]})]}),(null==Z?void 0:null===(k=Z.VoucherData)||void 0===k?void 0:k.voucherId)?(0,a.jsxs)("div",{className:"pay",children:[(0,a.jsx)("p",{className:"txt_price",children:"Giảm gi\xe1: "}),(0,a.jsxs)("p",{className:"price_discount",children:[I.format(null==Z?void 0:null===(w=Z.VoucherData)||void 0===w?void 0:w.voucherPrice),(0,a.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]})]}):null,(0,a.jsxs)("div",{className:"pay",children:[(0,a.jsx)("p",{className:"txt_pay",children:"Phải trả:"}),(0,a.jsxs)("p",{className:"price",children:[I.format(null==Z?void 0:Z.totalPrice),(0,a.jsx)("span",{style:{textDecoration:"underline",marginLeft:2},children:"đ"})]})]})]}),(0,a.jsxs)("div",{className:"btn_contact",style:{justifyContent:(null==Z?void 0:Z.status)!==1?"center":"space-between"},children:[(null==Z?void 0:Z.status)===1?(0,a.jsx)("button",{onClick:H,style:{marginRight:16},children:"X\xe1c nhận hủy"}):null,(0,a.jsx)("button",{children:(0,a.jsx)("a",{style:{color:"white"},href:"https://www.facebook.com/profile.php?id=100075108746922",children:"Li\xean hệ shop"})})]})]})})]})}},15149:function(e,n,t){"use strict";t.d(n,{gf:function(){return a},v4:function(){return o}});var r=t(38472),i=r.Z.create({baseURL:"http://localhost:8080"});i.interceptors.response.use(function(e){return e.data});var o=r.Z.create({baseURL:"http://localhost:8080"});o.interceptors.response.use(function(e){return e.data});var a=r.Z.create({baseURL:"http://localhost:3010"});a.interceptors.response.use(function(e){return e.data}),n.ZP=i},32141:function(e,n,t){"use strict";t.d(n,{A6:function(){return i}});var r=(0,t(34036).oM)({name:"pagination",initialState:{page:1},reducers:{handleChangePage:function(e,n){e.page=n.payload}}}),i=r.actions.handleChangePage;n.ZP=r.reducer},55922:function(e,n,t){"use strict";t.d(n,{Ib:function(){return a},So:function(){return c},dG:function(){return l},n1:function(){return s},ni:function(){return o}});var r=(0,t(34036).oM)({name:"user",initialState:{login:!1,userInfo:[],favourites:[],cartId:null},reducers:{logIn:function(e,n){e.login=!0,e.userInfo=n.payload},logOut:function(e){e.login=!1,e.userInfo=[],e.favourites=[],e.cartId=null,localStorage.removeItem("isSaveLogin"),localStorage.removeItem("refresh_token"),localStorage.removeItem("access_token"),sessionStorage.removeItem("refresh_token"),sessionStorage.removeItem("access_token")},updateAvatar:function(e,n){e.userInfo.avatar=n.payload},updateFavourites:function(e,n){e.favourites=n.payload},updateCartId:function(e,n){e.cartId=n.payload}}}),i=r.actions,o=i.logOut,a=i.logIn,s=i.updateAvatar,l=i.updateFavourites,c=i.updateCartId;n.ZP=r.reducer},38550:function(e,n,t){"use strict";t.d(n,{Du:function(){return l},JY:function(){return a},Q2:function(){return s},Vb:function(){return o},im:function(){return i}});var r=t(15149),i=function(e){return r.v4.post("/api/order/create-order",e)},o=function(e,n,t,i){return r.v4.get("/api/order/get-all-order?userId=".concat(e,"&status=").concat(n,"&limit=").concat(t,"&page=").concat(i))},a=function(e,n){return r.v4.get("/api/order/get-order-detail?orderId=".concat(e,"&userId=").concat(n))},s=function(e){return r.v4.put("/api/order/cancle-order",e)},l=function(e){return r.v4.post("/api/order/create_payment_url",e)}},91606:function(e,n,t){"use strict";t.d(n,{Np:function(){return c},Nr:function(){return l},rS:function(){return u}});var r=t(47002),i=t(2265),o=t(94444),a=t(85955),s=t.n(a),l=function(e,n){var t=(0,r._)((0,i.useState)(e),2),o=t[0],a=t[1];return(0,i.useEffect)(function(){var t=setTimeout(function(){return a(e)},n);return function(){return clearTimeout(t)}},[e,n]),o},c=function(e){return e?e=s()(e,{lower:!0,locale:"vi"}):""},u=(0,o.Z)({breakpoints:{values:{xs:0,sm:576,md:768,lg:992,xl:1200}}})},34511:function(){}},function(e){e.O(0,[7162,3216,4036,1159,9562,6648,7746,8433,5040,6970,5019,2971,7023,1744],function(){return e(e.s=41338)}),_N_E=e.O()}]);