(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6873],{32056:function(e,n,r){Promise.resolve().then(r.bind(r,69308))},69308:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return I}});var s=r(61943),t=r(7570),a=r(47002),i=r(11735),o=r(57437),u=r(2265),l=r(6920),d=r(1970),c=r(39343),v=r(50486),m=r(54952),p=r(5069),h=r(21159),f=r(33814),N=r(70766),g=r(62737),x=r.n(g),w=r(66648),A=r(32591),b=r(51428);r(54937);var _=r(55922),j=r(28325),D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"white",borderRadius:15,padding:"25px 20px 25px 20px"},E=function(e){var n,r=e.open,a=e.handleCloseModal,v=e.setIsOpen,m=(0,h.I0)(),p=(0,c.cI)(),g=p.register,x=p.handleSubmit,w=p.setValue,E=p.getValues,C=p.reset,I=p.formState.errors,S=(0,b.v9)(function(e){var n,r;return null===(r=e.user)||void 0===r?void 0:null===(n=r.userInfo)||void 0===n?void 0:n.id}),P=(n=(0,s._)(function(e){var n,r,s,t,a,o,u,l,d,c,p,h,g,x;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),m((0,j.OU)(!0)),[4,(0,N.Ak)({id:S,currentPassword:e.currentPassword,newPassword:e.newPassword})];case 1:return(n=i.sent())&&0===n.errCode&&(f.Am.success("Thay đổi mật khẩu th\xe0nh c\xf4ng",{className:"toast-normal"}),w("currentPassword",""),w("newPassword",""),w("comfirmPassword",""),v(!1)),[3,4];case 2:return(null==(r=i.sent())?void 0:null===(t=r.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.errCode)===1?f.Am.error("Thiếu tham số bắt buộc",{className:"toast-normal"}):(null==r?void 0:null===(o=r.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.errCode)===2?f.Am.error("Người d\xf9ng kh\xf4ng tồn tại",{className:"toast-normal"}):(null==r?void 0:null===(l=r.response)||void 0===l?void 0:null===(u=l.data)||void 0===u?void 0:u.errCode)===3?f.Am.error("Mật khẩu hiện tại kh\xf4ng đ\xfang",{className:"toast-normal"}):(null==r?void 0:null===(c=r.response)||void 0===c?void 0:null===(d=c.data)||void 0===d?void 0:d.errCode)===4?f.Am.error("Mật khẩu mới tr\xf9ng với mật khẩu hiện tại của bạn",{className:"toast-normal"}):(null==r?void 0:null===(h=r.response)||void 0===h?void 0:null===(p=h.data)||void 0===p?void 0:p.errCode)===-4?(f.Am.error("Phi\xean bản đăng nhập hết hạn",{className:"toast-normal"}),m((0,_.ni)())):f.Am.error(null==r?void 0:null===(x=r.response)||void 0===x?void 0:null===(g=x.data)||void 0===g?void 0:g.message,{className:"toast-normal"}),[3,4];case 3:return m((0,j.OU)(!1)),[7];case 4:return[2]}})}),function(e){return n.apply(this,arguments)});return(0,u.useEffect)(function(){r&&C()},[r]),(0,o.jsx)(A.Z,{open:r,onClose:a,children:(0,o.jsxs)("div",{className:"modal-change-password-container",style:(0,t._)({},D),children:[(0,o.jsx)(l.G,{icon:d.WA2,className:"modal-close-icon",onClick:a}),(0,o.jsx)("h3",{style:{fontSize:"var(--title-fontSize)",marginTop:4,marginBottom:20,textAlign:"center"},children:"Thay đổi mật khẩu"}),(0,o.jsxs)("form",{onSubmit:x(P),className:"form-update-password",children:[(0,o.jsxs)("div",{className:"change-password-wrap-input",children:[(0,o.jsx)("p",{children:"Nhập mật khẩu hiện tại"}),(0,o.jsx)("input",(0,t._)({className:"change-password-input",type:"password"},g("currentPassword",{required:"Nhập mật khẩu hiện tại của bạn"}))),I.currentPassword&&(0,o.jsx)("p",{className:"error",children:I.currentPassword.message})]}),(0,o.jsxs)("div",{className:"change-password-wrap-input",children:[(0,o.jsx)("p",{children:"Nhập mật khẩu mới"}),(0,o.jsx)("input",(0,t._)({className:"change-password-input",type:"password"},g("newPassword",{required:"Nhập mật khẩu mới của bạn",minLength:{value:8,message:"Tối thiểu 8 k\xfd tự"}}))),I.newPassword&&(0,o.jsx)("p",{className:"error",children:I.newPassword.message})]}),(0,o.jsxs)("div",{className:"change-password-wrap-input",children:[(0,o.jsx)("p",{children:"Nhập lại mật khẩu mới"}),(0,o.jsx)("input",(0,t._)({className:"change-password-input",type:"password"},g("comfirmPassword",{required:"Nhập lại mật khẩu mới của bạn",validate:{isCheckPass:function(e){if(E("newPassword")!==e)return"Mật khẩu kh\xf4ng tr\xf9ng khớp"}}}))),I.comfirmPassword&&(0,o.jsx)("p",{className:"error",children:I.comfirmPassword.message})]}),(0,o.jsx)("button",{type:"submit",className:"btn-update-password",children:"Cập nhật"})]})]})})};r(32219);var C=r(29982),I=function(){var e,n,r,g=(0,a._)((0,u.useState)("/images/default-avatar.png"),2),A=g[0],b=g[1],D=(0,a._)((0,u.useState)(null),2),I=D[0],S=D[1],P=(0,a._)((0,u.useState)(null),2),R=P[0],O=P[1],y=(0,a._)((0,u.useState)(null),2),k=y[0],M=y[1],T=(0,a._)((0,u.useState)(""),2),U=T[0],z=T[1],Z=(0,a._)((0,u.useState)(!1),2),L=Z[0],$=Z[1],F=(0,h.I0)(),G=(0,h.v9)(function(e){var n;return null===(n=e.user.userInfo)||void 0===n?void 0:n.id}),V=(0,h.v9)(function(e){var n,r;return null===(r=e.user.userInfo)||void 0===r?void 0:null===(n=r.roleData)||void 0===n?void 0:n.roleId}),Y=(0,c.cI)(),W=Y.register,H=Y.handleSubmit,J=Y.formState.errors,q=Y.setValue,B=(e=(0,s._)(function(){var e,n,r,s,t,a,o,u,l,d,c,v,m,p,h,g,w,A,D,E,C,I,S;return(0,i.Jh)(this,function(i){switch(i.label){case 0:F((0,j.OU)(!0)),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,(0,N.Rm)(G)];case 2:return(e=i.sent())&&0===e.errCode&&(z(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.userName),q("email",null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.email),q("userName",null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.userName),(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.phoneNumber)?q("phone",null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.phoneNumber):q("phone",""),(null==e?void 0:null===(u=e.data)||void 0===u?void 0:null===(o=u.deliveryAddressData)||void 0===o?void 0:o.length)>0?q("address",null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.deliveryAddressData[0]):q("address",""),(null==e?void 0:null===(d=e.data)||void 0===d?void 0:d.birthday)&&M(x()(new Date(+(null==e?void 0:null===(c=e.data)||void 0===c?void 0:c.birthday)))),(null==e?void 0:null===(v=e.data)||void 0===v?void 0:v.avatar)&&(b(null==e?void 0:null===(m=e.data)||void 0===m?void 0:m.avatar),F((0,_.n1)(null==e?void 0:null===(p=e.data)||void 0===p?void 0:p.avatar)))),[3,5];case 3:return(null==(h=i.sent())?void 0:null===(w=h.response)||void 0===w?void 0:null===(g=w.data)||void 0===g?void 0:g.errCode)===1?f.Am.error("Thiếu tham số bắt buộc",{className:"toast-normal"}):(null==h?void 0:null===(D=h.response)||void 0===D?void 0:null===(A=D.data)||void 0===A?void 0:A.errCode)===2?f.Am.error("Người d\xf9ng kh\xf4ng tồn tại",{className:"toast-normal"}):(null==h?void 0:null===(C=h.response)||void 0===C?void 0:null===(E=C.data)||void 0===E?void 0:E.errCode)===-4?(f.Am.error("Phi\xean bản đăng nhập hết hạn",{className:"toast-normal"}),F((0,_.ni)())):f.Am.error(null==h?void 0:null===(S=h.response)||void 0===S?void 0:null===(I=S.data)||void 0===I?void 0:I.message,{className:"toast-normal"}),[3,5];case 4:return F((0,j.OU)(!1)),[7];case 5:return[2]}})}),function(){return e.apply(this,arguments)});(0,u.useEffect)(function(){G&&B()},[G]);var X=(n=(0,s._)(function(e){var n;return(0,i.Jh)(this,function(r){return S(n=e.target.files[0]),n&&b(URL.createObjectURL(n)),[2]})}),function(e){return n.apply(this,arguments)}),Q=(r=(0,s._)(function(e){var n,r,s,t,a,o,u,l,d,c,v,m,p,h,g,x,w,A;return(0,i.Jh)(this,function(i){switch(i.label){case 0:F((0,j.OU)(!0)),i.label=1;case 1:return i.trys.push([1,3,4,5]),(n=new FormData).append("email",e.email),n.append("userName",e.userName),n.append("roleId",V),n.append("id",G),n.append("phoneNumber",e.phone),n.append("address",e.address),r=k&&k.$d?k.$d.getTime():"",n.append("birthday",r),I&&I!==R&&n.append("avatar",I),[4,(0,N.yX)(n)];case 2:return(s=i.sent())&&0===s.errCode&&(O(I),B(),f.Am.success("Cập nhật th\xe0nh c\xf4ng",{className:"toast-normal"})),[3,5];case 3:return(null==(t=i.sent())?void 0:null===(o=t.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.errCode)===1?f.Am.error("Thiếu tham số bắt buộc",{className:"toast-normal"}):(null==t?void 0:null===(l=t.response)||void 0===l?void 0:null===(u=l.data)||void 0===u?void 0:u.errCode)===2?f.Am.error("User kh\xf4ng tồn tại",{className:"toast-normal"}):(null==t?void 0:null===(c=t.response)||void 0===c?void 0:null===(d=c.data)||void 0===d?void 0:d.errCode)===3?f.Am.error("Email đ\xe3 tồn tại",{className:"toast-normal"}):(null==t?void 0:null===(m=t.response)||void 0===m?void 0:null===(v=m.data)||void 0===v?void 0:v.errCode)===4?f.Am.error("T\xean người d\xf9ng đ\xe3 tồn tại",{className:"toast-normal"}):(null==t?void 0:null===(h=t.response)||void 0===h?void 0:null===(p=h.data)||void 0===p?void 0:p.errCode)===5?f.Am.error("Số điện thoại đ\xe3 tồn tại",{className:"toast-normal"}):(null==t?void 0:null===(x=t.response)||void 0===x?void 0:null===(g=x.data)||void 0===g?void 0:g.errCode)===-4?(f.Am.error("Phi\xean bản đăng nhập hết hạn",{className:"toast-normal"}),F((0,_.ni)())):f.Am.error(null==t?void 0:null===(A=t.response)||void 0===A?void 0:null===(w=A.data)||void 0===w?void 0:w.message,{className:"toast-normal"}),[3,5];case 4:return F((0,j.OU)(!1)),[7];case 5:return[2]}})}),function(e){return r.apply(this,arguments)});return(0,o.jsxs)("div",{className:"user-page",children:[(0,o.jsxs)("div",{className:"user-container",children:[(0,o.jsxs)("div",{className:"username",children:[(0,o.jsxs)("div",{className:"user-wrap-avatar",children:[(0,o.jsx)(w.default,{src:A,width:0,height:0,sizes:"100vw",priority:!0,alt:"avt",className:"user-avatar-img",id:"image"}),(0,o.jsx)("label",{htmlFor:"image-upload",children:(0,o.jsx)(l.G,{className:"upload-icon",icon:d.g6h})}),(0,o.jsx)("input",{type:"file",id:"image-upload",onChange:function(e){return X(e)}})]}),(0,o.jsx)("h1",{children:U})]}),(0,o.jsxs)("form",{onSubmit:H(Q),children:[(0,o.jsxs)("div",{className:"btn-pageuser",children:[(0,o.jsx)("button",{className:"btn-change",onClick:function(){$(!0)},type:"button",children:"Đổi mật khẩu"}),(0,o.jsx)("button",{className:"btn-change",style:{marginLeft:"2rem"},type:"submit",children:"Cập nhật"})]}),(0,o.jsxs)("div",{className:"user-info-container",children:[(0,o.jsxs)("div",{className:"user-info-element",children:[(0,o.jsx)("label",{htmlFor:"email",children:"Email"}),(0,o.jsx)("input",(0,t._)({type:"text",className:"user-info-input",id:"email",readOnly:!0},W("email",{required:"Nhập email của bạn",pattern:{value:C.Sz.EMAIL,message:"Email kh\xf4ng hợp lệ"}}))),J.email&&(0,o.jsx)("p",{className:"user-info-error",children:J.email.message})]}),(0,o.jsxs)("div",{className:"user-info-element",children:[(0,o.jsx)("label",{htmlFor:"userName",children:"Họ v\xe0 t\xean"}),(0,o.jsx)("input",(0,t._)({type:"text",className:"user-info-input",id:"userName"},W("userName",{required:"Nhập t\xean của bạn",pattern:{value:C.Sz.USERNAME,message:"T\xean kh\xf4ng hợp lệ"}}))),J.userName&&(0,o.jsx)("p",{className:"user-info-error",children:J.userName.message})]}),(0,o.jsxs)("div",{className:"user-info-element",children:[(0,o.jsx)("label",{htmlFor:"phone",children:"Số điện thoại"}),(0,o.jsx)("input",(0,t._)({className:"user-info-input",id:"phone"},W("phone",{pattern:{value:C.Sz.PHONE,message:"Số điện thoại kh\xf4ng hợp lệ"}}))),J.phone&&(0,o.jsx)("p",{className:"user-info-error",children:J.phone.message})]}),(0,o.jsxs)("div",{className:"user-info-element",children:[(0,o.jsx)("label",{htmlFor:"address",children:"Địa chỉ"}),(0,o.jsx)("div",{className:"user-info-address",children:(0,o.jsx)("input",(0,t._)({type:"text",className:"user-info-input",id:"address"},W("address")))}),J.address&&(0,o.jsx)("p",{className:"user-info-error",children:J.address.message})]}),(0,o.jsxs)("div",{className:"user-info-element",children:[(0,o.jsx)("label",{htmlFor:"birth",children:"Ng\xe0y sinh"}),(0,o.jsx)(m._,{dateAdapter:p.y,children:(0,o.jsx)(v.M,{className:"date-picker",sx:{"& .MuiInputBase-root":{height:36,fontSize:"var(--text-fontSize)",color:"white",fontWeight:"bold"}},format:"DD/MM/YYYY",maxDate:x()(new Date),onChange:function(e){return M(e)},value:k||null})})]})]})]})]}),(0,o.jsx)(E,{open:L,setIsOpen:$,handleCloseModal:function(){$(!L)}})]})}},70766:function(e,n,r){"use strict";r.d(n,{Ak:function(){return h},C6:function(){return c},F$:function(){return u},Md:function(){return l},Rm:function(){return m},UW:function(){return g},VP:function(){return f},a5:function(){return x},gY:function(){return v},n8:function(){return N},p_:function(){return d},yX:function(){return p}});var s,t,a=r(61943),i=r(11735),o=r(15149),u=function(e,n){return o.ZP.post("/api/user/login-user",{email:e,password:n})},l=(s=(0,a._)(function(e){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,o.v4.get("/api/user/get-user-infor?userId=".concat(e))];case 1:return[2,n.sent()]}})}),function(e){return s.apply(this,arguments)}),d=function(e){return o.ZP.post("/api/user/register",e)},c=function(e){return o.ZP.post("/api/user/send-otp-code",{email:e})},v=function(e){return o.ZP.put("/api/user/change-password",e)},m=function(e){return o.v4.get("/api/user/get-user?id=".concat(e))},p=function(e){return o.v4.put("/api/user/update-user",e)},h=function(e){return o.v4.put("/api/user/change-password-profile",e)},f=function(e){return o.v4.post("/api/favourite/create-favourite",e)},N=function(e,n){return o.v4.delete("/api/favourite/delete-favourite?userId=".concat(e,"&productId=").concat(n))},g=function(e){return o.v4.get("/api/favourite/get-all-favourite?userId=".concat(e))},x=(t=(0,a._)(function(e){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,o.ZP.post("/api/user/refresh-token",{},{headers:{Authorization:"Bearer ".concat(e)}})];case 1:return[2,n.sent()]}})}),function(e){return t.apply(this,arguments)})},91606:function(e,n,r){"use strict";r.d(n,{Np:function(){return l},Nr:function(){return u},rS:function(){return d}});var s=r(47002),t=r(2265),a=r(94444),i=r(85955),o=r.n(i),u=function(e,n){var r=(0,s._)((0,t.useState)(e),2),a=r[0],i=r[1];return(0,t.useEffect)(function(){var r=setTimeout(function(){return i(e)},n);return function(){return clearTimeout(r)}},[e,n]),a},l=function(e){return e?e=o()(e,{lower:!0,locale:"vi"}):""},d=(0,a.Z)({breakpoints:{values:{xs:0,sm:576,md:768,lg:992,xl:1200}}})},29982:function(e,n,r){"use strict";r.d(n,{If:function(){return i},$D:function(){return a},nj:function(){return t},zR:function(){return o},LZ:function(){return u},ET:function(){return s},Sz:function(){return l},RM:function(){return c},MR:function(){return d}});var s={HOME:"/",PRODUCT:"/product/*",USER:"/user/*",LOGIN:"/login",REGISTER:"/register",NOT_FOUND:"/not-found",FORGOT_PASSWORD:"/forgot-password",CHANGE_PASSWORD:"/change-password/:userEmail",ADMIN:"/admin/*",OVERVIEW_ADMIN:"",PRODUCT_ADMIN:"product",PRODUCT_TYPE_ADMIN:"product-type",PRODUCT_BRAND_ADMIN:"product-brand",PRODUCT_SIZE_ADMIN:"product-size",PRODUCT_PRODUCTSIZE_ADMIN:"productsize",ORDER_DETAIL:"/:orderStatus/:orderId",ORDER_ADMIN:"order",ORDER_WAITING_ADMIN:"order-waiting",ORDER_DELIVERY_ADMIN:"order-delivery",ORDER_DONE_ADMIN:"order-done",ORDER_CANCELED_ADMIN:"order-canceled",USER_ADMIN:"user",VOUCHER_ADMIN:"voucher",REVENUE_ADMIN:"revenue",POST_ADMIN:"create",PUT_ADMIN:"edit"},t=12,a=8,i=5,o=0,u=1e7,l={USERNAME:/^[^\d!@#$%^&*()_+{}\[\]:;<>,.?/~\\-]+$/,EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,PHONE:/^\d{10,}$/,PRICE:/^\d{1,3}(?:\.\d{3})*$/,DISCOUNT:/^(?:100|[0-9]|[1-9][0-9])$/,QUANTITY:/^[0-9]+$/},d=[{id:'["id", "DESC"]',value:"Mặc định"},{id:'["id", "ASC"]',value:"A → Z"},{id:'["name", "DESC"]',value:"Z → A"},{id:'["price", "ASC"]',value:"Gi\xe1 tăng dần"},{id:'["price", "DESC"]',value:"Gi\xe1 giảm dần"}],c=[{id:"1",value:"Vợt cầu l\xf4ng"},{id:"2",value:"Gi\xe0y cầu l\xf4ng"},{id:"3",value:"\xc1o cầu l\xf4ng"}];r(91606)},32219:function(){},54937:function(){}},function(e){e.O(0,[4628,3216,4036,1159,9562,6648,6920,7746,4866,2591,9343,1174,5541,1970,4268,8325,2971,7023,1744],function(){return e(e.s=32056)}),_N_E=e.O()}]);